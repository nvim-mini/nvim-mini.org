<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mini.align documentation – MINI</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//assets/logo-mini_180x180.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0ed1a58f1961f20e100ea025a42ebf64.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-fdc1b2fd0a2d1e1fd2f41bfe1f0ec5c1.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f4e84033c18e8c370a330967136b3407.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-5386360745f20d466fa5a7e94763a348.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": "tree",
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style> .quarto-title > h1.title { display: none } </style>


<meta property="og:title" content="mini.align documentation – MINI">
<meta property="og:description" content="Modular Independent Neovim Improvements">
<meta property="og:image" content="https://echasnovski.github.io/mini-site/assets/logo-mini_social.png">
<meta property="og:site_name" content="MINI">
<meta property="og:image:height" content="630">
<meta property="og:image:width" content="1200">
<meta name="twitter:title" content="mini.align documentation – MINI">
<meta name="twitter:description" content="Modular Independent Neovim Improvements">
<meta name="twitter:image" content="https://echasnovski.github.io/mini-site/assets/logo-mini_social.png">
<meta name="twitter:image-height" content="630">
<meta name="twitter:image-width" content="1200">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const queryPrefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const darkModeDefault = queryPrefersDark.matches;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    queryPrefersDark.addEventListener("change", e => {
      if(window.localStorage.getItem("quarto-color-scheme") !== null)
        return;
      const alternate = e.matches
      toggleColorMode(alternate);
      localAlternateSentinel = e.matches ? 'alternate' : 'default'; // this is used alongside local storage!
      toggleGiscusIfUsed(alternate, darkModeDefault);
    });
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MINI</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../mini.nvim/index.html"> 
<span class="menu-text">mini.nvim</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/nvim-mini"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss-fill" role="img" aria-label="RSS">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#module" id="toc-module" class="nav-link active" data-scroll-target="#module">Module</a>
  <ul>
  <li><a href="#module-setup" id="toc-module-setup" class="nav-link" data-scroll-target="#module-setup">Setup</a></li>
  <li><a href="#module-comparisons" id="toc-module-comparisons" class="nav-link" data-scroll-target="#module-comparisons">Comparisons</a></li>
  <li><a href="#module-disabling" id="toc-module-disabling" class="nav-link" data-scroll-target="#module-disabling">Disabling</a></li>
  </ul></li>
  <li><a href="#minialign-glossary" id="toc-minialign-glossary" class="nav-link" data-scroll-target="#minialign-glossary">Glossary</a>
  <ul>
  <li><a href="#minialign-glossary-parts" id="toc-minialign-glossary-parts" class="nav-link" data-scroll-target="#minialign-glossary-parts">PARTS</a></li>
  <li><a href="#minialign-glossary-row" id="toc-minialign-glossary-row" class="nav-link" data-scroll-target="#minialign-glossary-row">ROW</a></li>
  <li><a href="#minialign-glossary-column" id="toc-minialign-glossary-column" class="nav-link" data-scroll-target="#minialign-glossary-column">COLUMN</a></li>
  <li><a href="#minialign-glossary-step" id="toc-minialign-glossary-step" class="nav-link" data-scroll-target="#minialign-glossary-step">STEP</a></li>
  <li><a href="#minialign-glossary-split" id="toc-minialign-glossary-split" class="nav-link" data-scroll-target="#minialign-glossary-split">SPLIT</a></li>
  <li><a href="#minialign-glossary-justify" id="toc-minialign-glossary-justify" class="nav-link" data-scroll-target="#minialign-glossary-justify">JUSTIFY</a></li>
  <li><a href="#minialign-glossary-merge" id="toc-minialign-glossary-merge" class="nav-link" data-scroll-target="#minialign-glossary-merge">MERGE</a></li>
  <li><a href="#minialign-glossary-region" id="toc-minialign-glossary-region" class="nav-link" data-scroll-target="#minialign-glossary-region">REGION</a></li>
  <li><a href="#minialign-glossary-mode" id="toc-minialign-glossary-mode" class="nav-link" data-scroll-target="#minialign-glossary-mode">MODE</a></li>
  </ul></li>
  <li><a href="#minialign-algorithm" id="toc-minialign-algorithm" class="nav-link" data-scroll-target="#minialign-algorithm">Algorithm</a>
  <ul>
  <li><a href="#minialign-algorithm-stringsalignment" id="toc-minialign-algorithm-stringsalignment" class="nav-link" data-scroll-target="#minialign-algorithm-stringsalignment">Strings alignment</a></li>
  <li><a href="#minialign-algorithm-interactiveregionalignment" id="toc-minialign-algorithm-interactiveregionalignment" class="nav-link" data-scroll-target="#minialign-algorithm-interactiveregionalignment">Interactive region alignment</a></li>
  </ul></li>
  <li><a href="#minialign-modifiers-builtin" id="toc-minialign-modifiers-builtin" class="nav-link" data-scroll-target="#minialign-modifiers-builtin">Modifiers builtin</a>
  <ul>
  <li><a href="#minialign-modifiers-builtin-mainoptionmodifiers" id="toc-minialign-modifiers-builtin-mainoptionmodifiers" class="nav-link" data-scroll-target="#minialign-modifiers-builtin-mainoptionmodifiers">Main option modifiers</a></li>
  <li><a href="#minialign-modifiers-builtin-modifiersaddingpre-steps" id="toc-minialign-modifiers-builtin-modifiersaddingpre-steps" class="nav-link" data-scroll-target="#minialign-modifiers-builtin-modifiersaddingpre-steps">Modifiers adding pre-steps</a></li>
  <li><a href="#minialign-modifiers-builtin-deletesomelastpre-step" id="toc-minialign-modifiers-builtin-deletesomelastpre-step" class="nav-link" data-scroll-target="#minialign-modifiers-builtin-deletesomelastpre-step">Delete some last pre-step</a></li>
  <li><a href="#minialign-modifiers-builtin-specialconfigurationsforcommonsplits" id="toc-minialign-modifiers-builtin-specialconfigurationsforcommonsplits" class="nav-link" data-scroll-target="#minialign-modifiers-builtin-specialconfigurationsforcommonsplits">Special configurations for common splits</a></li>
  </ul></li>
  <li><a href="#minialign-examples" id="toc-minialign-examples" class="nav-link" data-scroll-target="#minialign-examples">Examples</a>
  <ul>
  <li><a href="#minialign-examples-equalsign" id="toc-minialign-examples-equalsign" class="nav-link" data-scroll-target="#minialign-examples-equalsign">Equal sign</a></li>
  </ul></li>
  <li><a href="#minialign.setup" id="toc-minialign.setup" class="nav-link" data-scroll-target="#minialign.setup">setup()</a>
  <ul>
  <li><a href="#minialign.setup-parameters" id="toc-minialign.setup-parameters" class="nav-link" data-scroll-target="#minialign.setup-parameters">Parameters</a></li>
  <li><a href="#minialign.setup-usage" id="toc-minialign.setup-usage" class="nav-link" data-scroll-target="#minialign.setup-usage">Usage</a></li>
  </ul></li>
  <li><a href="#minialign.config" id="toc-minialign.config" class="nav-link" data-scroll-target="#minialign.config">config</a>
  <ul>
  <li><a href="#minialign.config-defaults" id="toc-minialign.config-defaults" class="nav-link" data-scroll-target="#minialign.config-defaults">Defaults</a></li>
  <li><a href="#minialign.config-modifiers" id="toc-minialign.config-modifiers" class="nav-link" data-scroll-target="#minialign.config-modifiers">Modifiers</a></li>
  <li><a href="#minialign.config-options" id="toc-minialign.config-options" class="nav-link" data-scroll-target="#minialign.config-options">Options</a></li>
  <li><a href="#minialign.config-steps" id="toc-minialign.config-steps" class="nav-link" data-scroll-target="#minialign.config-steps">Steps</a></li>
  </ul></li>
  <li><a href="#minialign.align_strings" id="toc-minialign.align_strings" class="nav-link" data-scroll-target="#minialign.align_strings">align_strings()</a>
  <ul>
  <li><a href="#minialign.align_strings-parameters" id="toc-minialign.align_strings-parameters" class="nav-link" data-scroll-target="#minialign.align_strings-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#minialign.align_user" id="toc-minialign.align_user" class="nav-link" data-scroll-target="#minialign.align_user">align_user()</a>
  <ul>
  <li><a href="#minialign.align_user-parameters" id="toc-minialign.align_user-parameters" class="nav-link" data-scroll-target="#minialign.align_user-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#minialign.as_parts" id="toc-minialign.as_parts" class="nav-link" data-scroll-target="#minialign.as_parts">as_parts()</a>
  <ul>
  <li><a href="#minialign.as_parts-class" id="toc-minialign.as_parts-class" class="nav-link" data-scroll-target="#minialign.as_parts-class">Class</a></li>
  <li><a href="#minialign.as_parts-fields" id="toc-minialign.as_parts-fields" class="nav-link" data-scroll-target="#minialign.as_parts-fields">Fields</a></li>
  <li><a href="#minialign.as_parts-usage" id="toc-minialign.as_parts-usage" class="nav-link" data-scroll-target="#minialign.as_parts-usage">Usage</a></li>
  </ul></li>
  <li><a href="#minialign.new_step" id="toc-minialign.new_step" class="nav-link" data-scroll-target="#minialign.new_step">new_step()</a>
  <ul>
  <li><a href="#minialign.new_step-parameters" id="toc-minialign.new_step-parameters" class="nav-link" data-scroll-target="#minialign.new_step-parameters">Parameters</a></li>
  <li><a href="#minialign.new_step-return" id="toc-minialign.new_step-return" class="nav-link" data-scroll-target="#minialign.new_step-return">Return</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step" id="toc-minialign.gen_step" class="nav-link" data-scroll-target="#minialign.gen_step">gen_step</a>
  <ul>
  <li><a href="#minialign.gen_step-usage" id="toc-minialign.gen_step-usage" class="nav-link" data-scroll-target="#minialign.gen_step-usage">Usage</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.default_split" id="toc-minialign.gen_step.default_split" class="nav-link" data-scroll-target="#minialign.gen_step.default_split">gen_step.default_split()</a>
  <ul>
  <li><a href="#minialign.gen_step.default_split-return" id="toc-minialign.gen_step.default_split-return" class="nav-link" data-scroll-target="#minialign.gen_step.default_split-return">Return</a></li>
  <li><a href="#minialign.gen_step.default_split-seealso" id="toc-minialign.gen_step.default_split-seealso" class="nav-link" data-scroll-target="#minialign.gen_step.default_split-seealso">See also</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.default_justify" id="toc-minialign.gen_step.default_justify" class="nav-link" data-scroll-target="#minialign.gen_step.default_justify">gen_step.default_justify()</a>
  <ul>
  <li><a href="#minialign.gen_step.default_justify-return" id="toc-minialign.gen_step.default_justify-return" class="nav-link" data-scroll-target="#minialign.gen_step.default_justify-return">Return</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.default_merge" id="toc-minialign.gen_step.default_merge" class="nav-link" data-scroll-target="#minialign.gen_step.default_merge">gen_step.default_merge()</a>
  <ul>
  <li><a href="#minialign.gen_step.default_merge-return" id="toc-minialign.gen_step.default_merge-return" class="nav-link" data-scroll-target="#minialign.gen_step.default_merge-return">Return</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.filter" id="toc-minialign.gen_step.filter" class="nav-link" data-scroll-target="#minialign.gen_step.filter">gen_step.filter()</a>
  <ul>
  <li><a href="#minialign.gen_step.filter-parameters" id="toc-minialign.gen_step.filter-parameters" class="nav-link" data-scroll-target="#minialign.gen_step.filter-parameters">Parameters</a></li>
  <li><a href="#minialign.gen_step.filter-return" id="toc-minialign.gen_step.filter-return" class="nav-link" data-scroll-target="#minialign.gen_step.filter-return">Return</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.ignore_split" id="toc-minialign.gen_step.ignore_split" class="nav-link" data-scroll-target="#minialign.gen_step.ignore_split">gen_step.ignore_split()</a>
  <ul>
  <li><a href="#minialign.gen_step.ignore_split-parameters" id="toc-minialign.gen_step.ignore_split-parameters" class="nav-link" data-scroll-target="#minialign.gen_step.ignore_split-parameters">Parameters</a></li>
  <li><a href="#minialign.gen_step.ignore_split-return" id="toc-minialign.gen_step.ignore_split-return" class="nav-link" data-scroll-target="#minialign.gen_step.ignore_split-return">Return</a></li>
  <li><a href="#minialign.gen_step.ignore_split-seealso" id="toc-minialign.gen_step.ignore_split-seealso" class="nav-link" data-scroll-target="#minialign.gen_step.ignore_split-seealso">See also</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.pair" id="toc-minialign.gen_step.pair" class="nav-link" data-scroll-target="#minialign.gen_step.pair">gen_step.pair()</a>
  <ul>
  <li><a href="#minialign.gen_step.pair-parameters" id="toc-minialign.gen_step.pair-parameters" class="nav-link" data-scroll-target="#minialign.gen_step.pair-parameters">Parameters</a></li>
  <li><a href="#minialign.gen_step.pair-return" id="toc-minialign.gen_step.pair-return" class="nav-link" data-scroll-target="#minialign.gen_step.pair-return">Return</a></li>
  </ul></li>
  <li><a href="#minialign.gen_step.trim" id="toc-minialign.gen_step.trim" class="nav-link" data-scroll-target="#minialign.gen_step.trim">gen_step.trim()</a>
  <ul>
  <li><a href="#minialign.gen_step.trim-parameters" id="toc-minialign.gen_step.trim-parameters" class="nav-link" data-scroll-target="#minialign.gen_step.trim-parameters">Parameters</a></li>
  <li><a href="#minialign.gen_step.trim-return" id="toc-minialign.gen_step.trim-return" class="nav-link" data-scroll-target="#minialign.gen_step.trim-return">Return</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">mini.align documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Generated from the <code>main</code> branch of ‘mini.nvim’</em></p>
<p><a name="mini.align" href="../../mini.nvim/doc/mini-align.html#mini.align"><b>mini.align</b></a> Align text interactively</p>
<p>MIT License Copyright (c) 2022 Evgeni Chasnovski</p>
<hr>
<section id="module" class="level3">
<h3 class="anchored" data-anchor-id="module">Module</h3>
<p>Rich and flexible customization of both alignment rules and user interaction. Works with charwise, linewise, and blockwise selections in both Normal mode (on textobject/motion; with dot-repeat) and Visual mode.</p>
<p>Features:</p>
<ul>
<li><p>Alignment is done in three main steps:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;Split&gt;</span> lines into parts based on Lua pattern(s) or user-supplied rule.</p></li>
<li><p><span class="help-syntax-keys">&lt;Justify&gt;</span> parts for certain side(s) to be same width inside columns.</p></li>
<li><p><span class="help-syntax-keys">&lt;Merge&gt;</span> parts to be lines, with customizable delimiter(s). Each main step can be preceded by other steps (pre-steps) to achieve highly customizable outcome. See <code>steps</code> value in <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a>. For more details, see <a href="../../mini.nvim/doc/mini-align.html#minialign-glossary">MiniAlign-glossary</a> and <a href="../../mini.nvim/doc/mini-align.html#minialign-algorithm">MiniAlign-algorithm</a>.</p></li>
</ul></li>
<li><p>User can control alignment interactively by pressing customizable modifiers (single keys representing how alignment steps and/or options should change). Some of default modifiers:</p>
<ul>
<li><p>Press <code>s</code> to enter split Lua pattern.</p></li>
<li><p>Press <code>j</code> to choose justification side from available ones (“left”, “center”, “right”, “none”).</p></li>
<li><p>Press <code>m</code> to enter merge delimiter.</p></li>
<li><p>Press <code>f</code> to enter filter Lua expression to configure which parts will be affected (like “align only first column”).</p></li>
<li><p>Press <code>i</code> to ignore some commonly unwanted split matches.</p></li>
<li><p>Press <code>p</code> to pair neighboring parts so they be aligned together.</p></li>
<li><p>Press <code>t</code> to trim whitespace from parts.</p></li>
<li><p>Press <code>&lt;BS&gt;</code> (backspace) to delete some last pre-step. For more details, see <a href="../../mini.nvim/doc/mini-align.html#minialign-modifiers-builtin">MiniAlign-modifiers-builtin</a> and <a href="../../mini.nvim/doc/mini-align.html#minialign-examples">MiniAlign-examples</a>.</p></li>
</ul></li>
<li><p>Alignment can be done with instant preview (result is updated after each modifier) or without it (result is shown and accepted after non-default split pattern is set).</p></li>
<li><p>Every user interaction is accompanied with helper status message showing relevant information about current alignment process.</p></li>
</ul>
<section id="module-setup" class="level4">
<h4 class="anchored" data-anchor-id="module-setup">Setup</h4>
<p>This module needs a setup with <code>require('mini.align').setup({})</code> (replace <code>{}</code> with your <code>config</code> table). It will create global Lua table <code>MiniAlign</code> which you can use for scripting or manually (with <code>:lua MiniAlign.*</code>).</p>
<p>See <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a> for available config settings.</p>
<p>You can override runtime config settings (like <code>config.modifiers</code>) locally to buffer inside <code>vim.b.minialign_config</code> which should have same structure as <code>MiniAlign.config</code>. See <a href="../../mini.nvim/doc/mini-nvim.html#mini.nvim-buffer-local-config">mini.nvim-buffer-local-config</a> for more details.</p>
<p>To stop module from showing non-error feedback, set <code>config.silent = true</code>.</p>
</section>
<section id="module-comparisons" class="level4">
<h4 class="anchored" data-anchor-id="module-comparisons">Comparisons</h4>
<ul>
<li><p><a href="https://github.com/junegunn/vim-easy-align">junegunn/vim-easy-align</a>:</p>
<ul>
<li><p>‘mini.align’ is mostly designed after ‘junegunn/vim-easy-align’, so there are a lot of similarities.</p></li>
<li><p>Both plugins allow users to change alignment options interactively by pressing modifier keys (albeit completely different default ones). ‘junegunn/vim-easy-align’ has those modifiers fixed, while ‘mini.align’ allows their full customization. See <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a> for examples.</p></li>
<li><p>‘junegunn/vim-easy-align’ is designed to treat delimiters differently than other parts of strings. ‘mini.align’ doesn’t distinguish split parts from one another by design: splitting is allowed to be done based on some other logic than by splitting on delimiters.</p></li>
<li><p>‘junegunn/vim-easy-align’ initially aligns by only first delimiter. ‘mini.align’ initially aligns by all delimiter.</p></li>
<li><p>‘junegunn/vim-easy-align’ implements special filtering by delimiter row number. ‘mini.align’ has builtin filtering based on Lua code supplied by user in modifier phase. See <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.filter">MiniAlign.gen_step.filter()</a> and ‘f’ builtin modifier.</p></li>
<li><p>‘mini.align’ treats any non-registered modifier as a plain delimiter pattern, while ‘junegunn/vim-easy-align’ does not.</p></li>
<li><p>‘mini.align’ exports core Lua function used for aligning strings (<a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a>).</p></li>
</ul></li>
<li><p><a href="https://github.com/godlygeek/tabular">godlygeek/tabular</a>:</p>
<ul>
<li><p>‘godlygeek/tabular’ is mostly designed around single command which is customized by printing its parameters. ‘mini.align’ implements different concept of interactive alignment through pressing customizable single character modifiers.</p></li>
<li><p>‘godlygeek/tabular’ can detect region upon which alignment can be desirable. ‘mini.align’ does not by design: use Visual selection or textobject/motion to explicitly define region to align.</p></li>
</ul></li>
</ul>
</section>
<section id="module-disabling" class="level4">
<h4 class="anchored" data-anchor-id="module-disabling">Disabling</h4>
<p>To disable, set <code>vim.g.minialign_disable</code> (globally) or <code>vim.b.minialign_disable</code> (for a buffer) to <code>true</code>. Considering high number of different scenarios and customization intentions, writing exact rules for disabling module’s functionality is left to user. See <a href="../../mini.nvim/doc/mini-nvim.html#mini.nvim-disabling-recipes">mini.nvim-disabling-recipes</a> for common recipes.</p>
<hr>
</section>
</section>
<section id="minialign-glossary" class="level3">
<h3 class="anchored" data-anchor-id="minialign-glossary">Glossary</h3>
<section id="minialign-glossary-parts" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-parts">PARTS</h4>
<p>2d array of strings (array of arrays of strings). See more in <a href="../../mini.nvim/doc/mini-align.html#minialign.as_parts">MiniAlign.as_parts()</a>.</p>
</section>
<section id="minialign-glossary-row" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-row">ROW</h4>
<p>First-level array of parts (like <code>parts[1]</code>).</p>
</section>
<section id="minialign-glossary-column" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-column">COLUMN</h4>
<p>Array of strings, constructed from parts elements with the same | second-level index (like <code>{ parts[1][1],</code> <code>parts[2][1], | }</code>). |</p>
</section>
<section id="minialign-glossary-step" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-step">STEP</h4>
<p>A named callable. See <a href="../../mini.nvim/doc/mini-align.html#minialign.new_step">MiniAlign.new_step()</a>. When used in terms of alignment steps, callable takes two arguments: some object (parts or string array) and option table.</p>
</section>
<section id="minialign-glossary-split" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-split">SPLIT</h4>
<p>Process of taking array of strings and converting it into parts.</p>
</section>
<section id="minialign-glossary-justify" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-justify">JUSTIFY</h4>
<p>Process of taking parts and converting them to aligned parts (all elements have same widths inside columns).</p>
</section>
<section id="minialign-glossary-merge" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-merge">MERGE</h4>
<p>Process of taking parts and converting it back to array of strings. Usually by concatenating rows into strings.</p>
</section>
<section id="minialign-glossary-region" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-region">REGION</h4>
<p>Table representing region in a buffer. Fields <span class="help-syntax-keys">&lt;from&gt;</span> / <span class="help-syntax-keys">&lt;to&gt;</span> have inclusive start / end positions (<span class="help-syntax-keys">&lt;to&gt;</span> might be <code>nil</code> to describe empty region). Positions are also tables with <span class="help-syntax-keys">&lt;line&gt;</span> and <span class="help-syntax-keys">&lt;col&gt;</span> fields (both start at 1).</p>
</section>
<section id="minialign-glossary-mode" class="level4">
<h4 class="anchored" data-anchor-id="minialign-glossary-mode">MODE</h4>
<p>Either charwise (“char”, <code>v</code>, <a href="https://neovim.io/doc/user/helptag.html?tag=charwise">charwise</a>), linewise (“line”, <code>V</code>, <a href="https://neovim.io/doc/user/helptag.html?tag=linewise">linewise</a>) or blockwise (“block”, <code>&lt;C-v&gt;</code>, <a href="https://neovim.io/doc/user/helptag.html?tag=blockwise-visual">blockwise-visual</a>)</p>
<hr>
</section>
</section>
<section id="minialign-algorithm" class="level3">
<h3 class="anchored" data-anchor-id="minialign-algorithm">Algorithm</h3>
<p>There are two main processes implemented in ‘mini.align’: strings alignment and interactive region alignment. See <a href="../../mini.nvim/doc/mini-align.html#minialign-glossary">MiniAlign-glossary</a> for more information about used terms.</p>
<section id="minialign-algorithm-stringsalignment" class="level4">
<h4 class="anchored" data-anchor-id="minialign-algorithm-stringsalignment">Strings alignment</h4>
<p>Main implementation is in <a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a>. Its input is array of strings and output - array of aligned strings. The process consists from three main steps (split, justify, merge) which can be preceded by any number of preliminary steps (pre-split, pre-justify, pre-merge).</p>
<p>Algorithm:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;Pre-split&gt;</span>. Take input array of strings and consecutively apply all pre-split steps (<code>steps.pre_split</code>). Each one has <code>(strings, opts)</code> signature and should modify array in place.</p></li>
<li><p><span class="help-syntax-keys">&lt;Split&gt;</span>. Take array of strings and convert it to parts with <code>steps.split()</code>. It has <code>(strings, opts)</code> signature and should return parts.</p></li>
<li><p><span class="help-syntax-keys">&lt;Pre-justify&gt;</span>. Take parts and consecutively apply all pre-justify steps (<code>steps.pre_justify</code>). Each one has <code>(parts, opts)</code> signature and should modify parts in place.</p></li>
<li><p><span class="help-syntax-keys">&lt;Justify&gt;</span>. Take parts and apply <code>steps.justify()</code>. It has <code>(parts, opts)</code> signature and should modify parts in place.</p></li>
<li><p><span class="help-syntax-keys">&lt;Pre-merge&gt;</span>. Take parts and consecutively apply all pre-merge steps (<code>steps.pre_merge</code>). Each one has <code>(parts, opts)</code> signature and should modify parts in place.</p></li>
<li><p><span class="help-syntax-keys">&lt;Merge&gt;</span>. Take parts and convert it to array of strings with <code>steps.merge()</code>. It has <code>(parts, opts)</code> signature and should return array of strings.</p></li>
</ul>
<p>Notes:</p>
<ul>
<li><p>All table objects are initially copied so that modification in place doesn’t affect workflow.</p></li>
<li><p>Default main steps are designed to be controlled via options. See <a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a> and default step entries in <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step">MiniAlign.gen_step</a>.</p></li>
<li><p>All steps are guaranteed to take same option table as second argument. This allows steps to “talk” to each other, i.e.&nbsp;earlier steps can pass data to later ones.</p></li>
</ul>
</section>
<section id="minialign-algorithm-interactiveregionalignment" class="level4">
<h4 class="anchored" data-anchor-id="minialign-algorithm-interactiveregionalignment">Interactive region alignment</h4>
<p>Interactive alignment is a main entry point for most users. It can be done in two flavors:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;Without-preview&gt;</span>. Initiated via mapping defined in <code>start</code> of <code>MiniAlign.config.mappings</code>. Alignment is accepted once split pattern becomes non-default.</p></li>
<li><p><span class="help-syntax-keys">&lt;With-preview&gt;</span>. Initiated via mapping defined in <code>start_with_preview</code> of <code>MiniAlign.config.mappings</code>. Alignment result is shown after every modifier and is accepted after <code>&lt;CR&gt;</code> (<code>Enter</code>) is hit. Note: each preview is done by applying current alignment steps and options to the initial region lines, not the ones currently displaying in preview.</p></li>
</ul>
<p>Lifecycle (assuming default mappings):</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;Initiate-alignment&gt;</span>:</p>
<ul>
<li><p>In Normal mode type <code>ga</code> (or <code>gA</code> to show preview) followed by textobject or motion defining region to be aligned.</p></li>
<li><p>In Visual mode select region and type <code>ga</code> (or <code>gA</code> to show preview). Strings contained in selected region will be used as input to <a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a>. Beware of mode when selecting region: charwise (<code>v</code>), linewise (<code>V</code>), or blockwise (<code>&lt;C-v&gt;</code>). They all behave differently.</p></li>
</ul></li>
<li><p><span class="help-syntax-keys">&lt;Press-modifiers&gt;</span>. Press single keys one at a time:</p>
<ul>
<li><p>If pressed key is among table keys of <code>modifiers</code> table of <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a>, its function value is executed. It usually modifies some options(s) and/or affects some pre-step(s).</p></li>
<li><p>If pressed key is not among defined modifiers, it is treated as plain split pattern. This process can either end by itself (usually in case of no preview and non-default split pattern being set) or you can choose to end it manually.</p></li>
</ul></li>
<li><p><span class="help-syntax-keys">&lt;Accept-or-discard&gt;</span>. In case of active preview, accept current result by pressing <code>&lt;CR&gt;</code>. Discard any result and return to initial regions with either <code>&lt;Esc&gt;</code> or <code>&lt;C-c&gt;</code>.</p></li>
</ul>
<p>See more in <a href="../../mini.nvim/doc/mini-align.html#minialign-modifiers-builtin">MiniAlign-modifiers-builtin</a> and <a href="../../mini.nvim/doc/mini-align.html#minialign-examples">MiniAlign-examples</a>.</p>
<p>Notes:</p>
<ul>
<li><p>Visual blockwise selection works best with ‘virtualedit’ equal to “block” or “all”.</p></li>
<li><p>Alignment with preview works best with ‘showmode’ disabled.</p></li>
</ul>
<hr>
</section>
</section>
<section id="minialign-modifiers-builtin" class="level3">
<h3 class="anchored" data-anchor-id="minialign-modifiers-builtin">Modifiers builtin</h3>
<p>Overview of builtin modifiers</p>
<p>All examples assume interactive alignment with preview in linewise mode. With default mappings, use <code>V</code> to select lines and <code>gA</code> to initiate alignment. It might be helpful to copy lines into modifiable buffer and experiment yourself.</p>
<p>Notes:</p>
<ul>
<li><p>Any pressed key which doesn’t have defined modifier will be treated as plain split pattern.</p></li>
<li><p>All modifiers can be customized inside <a href="../../mini.nvim/doc/mini-align.html#minialign.setup">MiniAlign.setup()</a>. See “Modifiers” section of <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a>.</p></li>
</ul>
<section id="minialign-modifiers-builtin-mainoptionmodifiers" class="level4">
<h4 class="anchored" data-anchor-id="minialign-modifiers-builtin-mainoptionmodifiers">Main option modifiers</h4>
<p><span class="help-syntax-keys">&lt;s&gt;</span> Enter split pattern (confirm prompt by pressing <code>&lt;CR&gt;</code>). Input is treated as plain delimiter.</p>
<p>Before:</p>
<pre><code>a-b-c
aa-bb-cc</code></pre>
<p>After typing <code>s-&lt;CR&gt;</code>:</p>
<pre><code>a -b -c
aa-bb-cc</code></pre>
<p><span class="help-syntax-keys">&lt;j&gt;</span> Choose justify side. Prompts user (with helper message) to type single character identifier of side: <code>l</code>eft, <code>c</code>enter, <code>r</code>ight, <code>n</code>one.</p>
<p>Before:</p>
<pre><code>a_b_c
aa_bb_cc</code></pre>
<p>After typing <code>_jr</code> (first make split by <code>_</code>):</p>
<pre><code> a_ b_ c
aa_bb_cc</code></pre>
<p><span class="help-syntax-keys">&lt;m&gt;</span> Enter merge delimiter (confirm prompt by pressing <code>&lt;CR&gt;</code>).</p>
<p>Before:</p>
<pre><code>a_b_c
aa_bb_cc</code></pre>
<p>After typing <code>_m--&lt;CR&gt;</code> (first make split by <code>_</code>):</p>
<pre><code>a --_--b --_--c
aa--_--bb--_--cc</code></pre>
</section>
<section id="minialign-modifiers-builtin-modifiersaddingpre-steps" class="level4">
<h4 class="anchored" data-anchor-id="minialign-modifiers-builtin-modifiersaddingpre-steps">Modifiers adding pre-steps</h4>
<p><span class="help-syntax-keys">&lt;f&gt;</span> Enter filter expression. See more details in <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.filter">MiniAlign.gen_step.filter()</a>.</p>
<p>Before:</p>
<pre><code>a_b_c
aa_bb_cc</code></pre>
<p>After typing <code>_fn==1&lt;CR&gt;</code> (first make split by <code>_</code>):</p>
<pre><code>a _b_c
aa_bb_cc</code></pre>
<p><span class="help-syntax-keys">&lt;i&gt;</span> Ignore some split matches. It modifies <code>split_exclude_patterns</code> option by adding commonly wanted patterns. See more details in <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.ignore_split">MiniAlign.gen_step.ignore_split()</a>.</p>
<p>Before:</p>
<pre><code>/* This_is_assumed_to_be_comment */
a"_"_b
aa_bb</code></pre>
<p>After typing <code>_i</code> (first make split by <code>_</code>):</p>
<pre><code>/* This_is_assumed_to_be_comment */
a"_"_b
aa  _bb</code></pre>
<p><span class="help-syntax-keys">&lt;p&gt;</span> Pair neighboring parts.</p>
<p>Before:</p>
<pre><code>a_b_c
aaa_bbb_ccc</code></pre>
<p>After typing <code>_p</code> (first make split by <code>_</code>):</p>
<pre><code>a_  b_  c
aaa_bbb_ccc</code></pre>
<p><span class="help-syntax-keys">&lt;t&gt;</span> Trim parts from whitespace on both sides (keeping indentation).</p>
<p>Before:</p>
<pre><code>a   _   b   _   c
  aa _bb _cc</code></pre>
<p>After typing <code>_t</code> (first make split by <code>_</code>):</p>
<pre><code>a   _b _c
  aa_bb_cc</code></pre>
</section>
<section id="minialign-modifiers-builtin-deletesomelastpre-step" class="level4">
<h4 class="anchored" data-anchor-id="minialign-modifiers-builtin-deletesomelastpre-step">Delete some last pre-step</h4>
<p><span class="help-syntax-keys">&lt;BS&gt;</span> Delete one of the pre-steps. If there is only one kind of pre-steps, remove its latest added one. If not, prompt user to choose pre-step kind by entering single character: <code>s</code>plit, <code>j</code>ustify, <code>m</code>erge.</p>
<p>Examples:</p>
<ul>
<li><p><code>tp&lt;BS&gt;</code> results in only “trim” step to be left.</p></li>
<li><p><code>it&lt;BS&gt;</code> prompts to choose which step to delete (pre-split or pre-justify in this case).</p></li>
</ul>
</section>
<section id="minialign-modifiers-builtin-specialconfigurationsforcommonsplits" class="level4">
<h4 class="anchored" data-anchor-id="minialign-modifiers-builtin-specialconfigurationsforcommonsplits">Special configurations for common splits</h4>
<p><span class="help-syntax-keys">&lt;=&gt;</span> Use special pattern to align by a group of consecutive “=”. It can be preceded by any number of punctuation marks and followed by some sommon punctuation characters. Trim whitespace and merge with single space.</p>
<p>Before:</p>
<pre><code>a=b
aa&lt;=bb
aaa===bbb
aaaa   =   cccc</code></pre>
<p>After typing <code>=</code>:</p>
<pre><code>a    =   b
aa   &lt;=  bb
aaa  === bbb
aaaa =   cccc</code></pre>
<p><span class="help-syntax-keys">&lt;,&gt;</span> Besides splitting by “,” character, trim whitespace, pair neighboring parts and merge with single space.</p>
<p>Before:</p>
<pre><code>a,b
aa,bb
aaa    ,    bbb</code></pre>
<p>After typing <code>,</code>:</p>
<pre><code>a,   b
aa,  bb
aaa, bbb</code></pre>
<p><span class="help-syntax-keys">&lt;|&gt;</span> Split by “|” character, trim whitespace, merge with single space.</p>
<p>Before:</p>
<pre><code>|a|b|
|aa|bb|
|aaa    |    bbb   |</code></pre>
<p>After typing <code>|</code>:</p>
<pre><code>| a   | b   |
| aa  | bb  |
| aaa | bbb |</code></pre>
<p><span class="help-syntax-keys">&lt;Space&gt;</span> (Space bar) Squash consecutive whitespace into single space (except possible indentation) and split by <code>%s+</code> pattern (keeps indentation).</p>
<p>Before:</p>
<pre><code>a b c
  aa    bb   cc</code></pre>
<p>After typing <code>&lt;Space&gt;</code>:</p>
<pre><code>```
a  b  c
aa bb cc
```</code></pre>
<hr>
</section>
</section>
<section id="minialign-examples" class="level3">
<h3 class="anchored" data-anchor-id="minialign-examples">Examples</h3>
<p>Copy lines in modifiable buffer, initiate alignment with preview (<code>gAip</code>) and try typing suggested key sequences. These are modified examples taken from ‘junegunn/vim-easy-align’.</p>
<section id="minialign-examples-equalsign" class="level4">
<h4 class="anchored" data-anchor-id="minialign-examples-equalsign">Equal sign</h4>
<p>Lines:</p>
<pre><code># This=is=assumed=to be a comment
"a ="
a =
a = 1
bbbb = 2
ccccccc = 3
ccccccccccccccc
ddd = 4
eeee === eee = eee = eee=f
fff = ggg += gg &amp;&amp;= gg
g != hhhhhhhh == 888
i   := 5
i     %= 5
i       *= 5
j     =~ 5
j   &gt;= 5
aa      =&gt;         123
aa &lt;&lt;= 123
aa        &gt;&gt;= 123
bbb               =&gt; 123
c     =&gt; 1233123
d   =&gt;      123
dddddd &amp;&amp;= 123
dddddd ||= 123
dddddd /= 123
gg &lt;=&gt; ee</code></pre>
<p>Key sequences:</p>
<ul>
<li><p><code>=</code></p></li>
<li><p><code>=jc</code></p></li>
<li><p><code>=jr</code></p></li>
<li><p><code>=m!&lt;CR&gt;</code></p></li>
<li><p><code>=p</code></p></li>
<li><p><code>=i</code> (execute <code>:lua vim.o.commentstring = '# %s'</code> for full experience)</p></li>
<li><p><code>=&lt;BS&gt;</code></p></li>
<li><p><code>=&lt;BS&gt;p</code></p></li>
<li><p><code>=fn==1&lt;CR&gt;</code></p></li>
<li><p><code>=&lt;BS&gt;fn==1&lt;CR&gt;t</code></p></li>
<li><p><code>=frow&gt;7&lt;CR&gt;</code></p></li>
</ul>
<hr>
</section>
</section>
<section id="minialign.setup" class="level3">
<h3 class="anchored" data-anchor-id="minialign.setup">setup()</h3>
<p align="center">
<code>MiniAlign.setup</code>(<span class="help-syntax-special">{config}</span>)
</p>
<p>Module setup</p>
<section id="minialign.setup-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.setup-parameters">Parameters</h4>
<p><span class="help-syntax-special">{config}</span> <code>(table|nil)</code> Module config table. See <a href="../../mini.nvim/doc/mini-align.html#minialign.config">MiniAlign.config</a>.</p>
</section>
<section id="minialign.setup-usage" class="level4">
<h4 class="anchored" data-anchor-id="minialign.setup-usage">Usage</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">).</span>setup<span class="op">()</span> <span class="co">-- use default config</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- OR</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">).</span>setup<span class="op">({})</span> <span class="co">-- replace {} with your config table</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="minialign.config" class="level3">
<h3 class="anchored" data-anchor-id="minialign.config">config</h3>
<p align="center">
<code>MiniAlign.config</code>
</p>
<section id="minialign.config-defaults" class="level4">
<h4 class="anchored" data-anchor-id="minialign.config-defaults">Defaults</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="va">MiniAlign</span><span class="op">.</span><span class="va">config</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Module mappings. Use `''` (empty string) to disable one.</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">mappings</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">start</span> <span class="op">=</span> <span class="st">'ga'</span><span class="op">,</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">start_with_preview</span> <span class="op">=</span> <span class="st">'gA'</span><span class="op">,</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Modifiers changing alignment steps and/or options</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="va">modifiers</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Main option modifiers</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'s'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enter split pattern&gt;,</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'j'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: choose justify side&gt;,</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'m'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enter merge delimiter&gt;,</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Modifiers adding pre-steps</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'f'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: filter parts by entering Lua expression&gt;,</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'i'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: ignore some split matches&gt;,</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'p'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: pair parts&gt;,</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'t'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: trim parts&gt;,</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Delete some last pre-step</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'&lt;BS&gt;'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: delete some last pre-step&gt;,</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Special configurations for common splits</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'='</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enhanced setup for '='&gt;,</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">','</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enhanced setup for ','&gt;,</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'|'</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enhanced setup for '|'&gt;,</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">' '</span><span class="op">]</span> <span class="op">=</span> <span class="co">--&lt;function: enhanced setup for ' '&gt;,</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Default options controlling alignment process</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="va">options</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="va">split_pattern</span> <span class="op">=</span> <span class="st">''</span><span class="op">,</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="va">justify_side</span> <span class="op">=</span> <span class="st">'left'</span><span class="op">,</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="va">merge_delimiter</span> <span class="op">=</span> <span class="st">''</span><span class="op">,</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Default steps performing alignment (if `nil`, default is used)</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="va">steps</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>    <span class="va">pre_split</span> <span class="op">=</span> <span class="op">{},</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>    <span class="va">split</span> <span class="op">=</span> <span class="kw">nil</span><span class="op">,</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="va">pre_justify</span> <span class="op">=</span> <span class="op">{},</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    <span class="va">justify</span> <span class="op">=</span> <span class="kw">nil</span><span class="op">,</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>    <span class="va">pre_merge</span> <span class="op">=</span> <span class="op">{},</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="va">merge</span> <span class="op">=</span> <span class="kw">nil</span><span class="op">,</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Whether to disable showing non-error feedback</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- This also affects (purely informational) helper messages shown after</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- idle time if user input is required.</span></span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>  <span class="va">silent</span> <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="minialign.config-modifiers" class="level4">
<h4 class="anchored" data-anchor-id="minialign.config-modifiers">Modifiers</h4>
<p><code>MiniAlign.config.modifiers</code> is used to define interactive user experience of managing alignment process. It is a table with single character keys and modifier function values.</p>
<p>Each modifier function:</p>
<ul>
<li><p>Is called when corresponding modifier key is pressed.</p></li>
<li><p>Has signature <code>(steps, opts)</code> and should modify any of its input in place.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Modifier function used for default ‘i’ modifier:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">(</span><span class="va">steps</span><span class="op">,</span> <span class="cn">_</span><span class="op">)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table.insert</span><span class="op">(</span><span class="va">steps</span><span class="op">.</span><span class="va">pre_split</span><span class="op">,</span> <span class="va">MiniAlign</span><span class="op">.</span><span class="va">gen_step</span><span class="op">.</span>ignore_split<span class="op">())</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Tweak ‘t’ modifier to use highest indentation instead of keeping it:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">).</span>setup<span class="op">({</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">modifiers</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">t</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">steps</span><span class="op">,</span> <span class="cn">_</span><span class="op">)</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">trim_high</span> <span class="op">=</span> <span class="va">MiniAlign</span><span class="op">.</span><span class="va">gen_step</span><span class="op">.</span>trim<span class="op">(</span><span class="st">'both'</span><span class="op">,</span> <span class="st">'high'</span><span class="op">)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">steps</span><span class="op">.</span><span class="va">pre_justify</span><span class="op">,</span> <span class="va">trim_high</span><span class="op">)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Tweak <code>j</code> modifier to cycle through available “justify_side” option values (like in ‘junegunn/vim-easy-align’):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">).</span>setup<span class="op">({</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">modifiers</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">j</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="cn">_</span><span class="op">,</span> <span class="va">opts</span><span class="op">)</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">next_option</span> <span class="op">=</span> <span class="op">({</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">left</span> <span class="op">=</span> <span class="st">'center'</span><span class="op">,</span> <span class="va">center</span> <span class="op">=</span> <span class="st">'right'</span><span class="op">,</span> <span class="va">right</span> <span class="op">=</span> <span class="st">'none'</span><span class="op">,</span> <span class="va">none</span> <span class="op">=</span> <span class="st">'left'</span><span class="op">,</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">})[</span><span class="va">opts</span><span class="op">.</span><span class="va">justify_side</span><span class="op">]</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>      <span class="va">opts</span><span class="op">.</span><span class="va">justify_side</span> <span class="op">=</span> <span class="va">next_option</span> <span class="kw">or</span> <span class="st">'left'</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span><span class="op">,</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="minialign.config-options" class="level4">
<h4 class="anchored" data-anchor-id="minialign.config-options">Options</h4>
<p><code>MiniAlign.config.options</code> defines default values of options used to control behavior of steps.</p>
<p>Examples:</p>
<ul>
<li>Set <code>justify_side = 'center'</code> to center align at initialization.</li>
</ul>
<p>For more details about options see <a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a> and entries of <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step">MiniAlign.gen_step</a> for default main steps.</p>
</section>
<section id="minialign.config-steps" class="level4">
<h4 class="anchored" data-anchor-id="minialign.config-steps">Steps</h4>
<p><code>MiniAlign.config.steps</code> defines default steps to be applied during alignment process.</p>
<p>Examples:</p>
<ul>
<li><p>Align by default only first pair of columns:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">align</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="va">align</span><span class="op">.</span>setup<span class="op">({</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">steps</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">pre_justify</span> <span class="op">=</span> <span class="op">{</span> <span class="va">align</span><span class="op">.</span><span class="va">gen_step</span><span class="op">.</span>filter<span class="op">(</span><span class="st">'n == 1'</span><span class="op">)</span> <span class="op">}</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<hr>
</section>
</section>
<section id="minialign.align_strings" class="level3">
<h3 class="anchored" data-anchor-id="minialign.align_strings">align_strings()</h3>
<p align="center">
<code>MiniAlign.align_strings</code>(<span class="help-syntax-special">{strings}</span>, <span class="help-syntax-special">{opts}</span>, <span class="help-syntax-special">{steps}</span>)
</p>
<p>Align strings</p>
<p>For details about alignment process see <a href="../../mini.nvim/doc/mini-align.html#minialign-algorithm">MiniAlign-algorithm</a>.</p>
<section id="minialign.align_strings-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.align_strings-parameters">Parameters</h4>
<p><span class="help-syntax-special">{strings}</span> <code>(table)</code> Array of strings.</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Its copy will be passed to steps as second argument. Extended with <code>MiniAlign.config.options</code>. This is a place to control default main steps:</p>
<ul>
<li><p><code>opts.split_pattern</code> - Lua pattern(s) used to make split parts.</p></li>
<li><p><code>opts.split_exclude_patterns</code> - which split matches should be ignored.</p></li>
<li><p><code>opts.justify_side</code> - which direction(s) alignment should be done.</p></li>
<li><p><code>opts.justify_offsets</code> - offsets tweaking width of first column</p></li>
<li><p><code>opts.merge_delimiter</code> - which delimiter(s) to use when merging. For more information see <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step">MiniAlign.gen_step</a> entry for corresponding default step.</p></li>
</ul>
<p><span class="help-syntax-special">{steps}</span> <code>(table|nil)</code> Steps. Extended with <code>MiniAlign.config.steps</code>. Possible <code>nil</code> values are replaced with corresponding default steps:</p>
<ul>
<li><p><code>split</code> - <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.default_split">MiniAlign.gen_step.default_split()</a>.</p></li>
<li><p><code>justify</code> - <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.default_justify">MiniAlign.gen_step.default_justify()</a>.</p></li>
<li><p><code>merge</code> - <a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.default_merge">MiniAlign.gen_step.default_merge()</a>.</p></li>
</ul>
<hr>
</section>
</section>
<section id="minialign.align_user" class="level3">
<h3 class="anchored" data-anchor-id="minialign.align_user">align_user()</h3>
<p align="center">
<code>MiniAlign.align_user</code>(<span class="help-syntax-special">{mode}</span>)
</p>
<p>Align current region with user-supplied steps</p>
<p>Mostly designed to be used inside mappings.</p>
<p>Will use <a href="../../mini.nvim/doc/mini-align.html#minialign.align_strings">MiniAlign.align_strings()</a> and set the following options in <code>opts</code>:</p>
<ul>
<li><p><code>justify_offsets</code> - array of offsets used to achieve actual alignment of a region. It is non-trivial (not array of zeros) only for charwise selection: offset of first string is computed as width of prefix to the left of region start.</p></li>
<li><p><code>region</code> - current affected region (see <a href="../../mini.nvim/doc/mini-align.html#minialign-glossary">MiniAlign-glossary</a>). Can be used to create more advanced steps.</p></li>
<li><p><code>mode</code> - mode of selection (see <a href="../../mini.nvim/doc/mini-align.html#minialign-glossary">MiniAlign-glossary</a>).</p></li>
</ul>
<section id="minialign.align_user-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.align_user-parameters">Parameters</h4>
<p><span class="help-syntax-special">{mode}</span> <code>(string)</code> Selection mode. One of “char”, “line”, “block”.</p>
<hr>
</section>
</section>
<section id="minialign.as_parts" class="level3">
<h3 class="anchored" data-anchor-id="minialign.as_parts">as_parts()</h3>
<p align="center">
<code>MiniAlign.as_parts</code>(<span class="help-syntax-special">{arr2d}</span>)
</p>
<p>Convert 2d array of strings to parts</p>
<p>This function verifies if input is a proper 2d array of strings and adds methods to its copy.</p>
<section id="minialign.as_parts-class" class="level4">
<h4 class="anchored" data-anchor-id="minialign.as_parts-class">Class</h4>
<p><span class="help-syntax-special">{parts}</span></p>
</section>
<section id="minialign.as_parts-fields" class="level4">
<h4 class="anchored" data-anchor-id="minialign.as_parts-fields">Fields</h4>
<p><span class="help-syntax-special">{apply}</span> <code>(function)</code> Takes callable <code>f</code> and applies it to every part. Callable should have signature <code>(s, data)</code>: <code>s</code> is a string part, <code>data</code> - table with its data (<span class="help-syntax-keys">&lt;row&gt;</span> has row number, <span class="help-syntax-keys">&lt;col&gt;</span> has column number). Returns new 2d array.</p>
<p><span class="help-syntax-special">{apply_inplace}</span> <code>(function)</code> Takes callable <code>f</code> and applies it to every part. Should have same signature as in <code>apply</code> method. Outputs (should all be strings) are assigned in place to a corresponding parts element. Returns parts itself to enable method chaining.</p>
<p><span class="help-syntax-special">{get_dims}</span> <code>(function)</code> Return dimensions of parts array: a table with <span class="help-syntax-keys">&lt;row&gt;</span> and <span class="help-syntax-keys">&lt;col&gt;</span> keys having number of rows and number of columns (maximum number of elements across all rows).</p>
<p><span class="help-syntax-special">{group}</span> <code>(function)</code> Concatenate neighboring strings based on supplied boolean mask and direction (one of “left”, default, or “right”). Has signature <code>(mask, direction)</code> and modifies parts in place. Returns parts itself to enable method chaining. Example:</p>
<ul>
<li><p>Parts: <code>{ { "a", "b", "c" }, { "d", "e" }, { "f" } }</code></p></li>
<li><p>Mask: <code>{ { false, false, true }, { true, false }, { false } }</code></p></li>
<li><p>Result for direction “left”: <code>{ { "abc" },    { "d", "e" }, { "f" } }</code></p></li>
<li><p>Result for direction “right”: <code>{ { "ab","c" }, { "de" },     { "f" } }</code></p></li>
</ul>
<p><span class="help-syntax-special">{pair}</span> <code>(function)</code> Concatenate neighboring element pairs. Takes <code>direction</code> as input (one of “left”, default, or “right”) and applies <code>group()</code> for an alternating mask. Example:</p>
<ul>
<li><p>Parts: <code>{ { "a", "b", "c" }, { "d", "e" }, { "f" } }</code></p></li>
<li><p>Result for direction “left”: <code>{ { "ab", "c" }, { "de" }, { "f" } }</code></p></li>
<li><p>Result for direction “right”: <code>{ { "a", "bc" }, { "de" }, { "f" } }</code></p></li>
</ul>
<p><span class="help-syntax-special">{slice_col}</span> <code>(function)</code> Return column with input index <code>j</code>. Note: it might not be an array if rows have unequal number of columns.</p>
<p><span class="help-syntax-special">{slice_row}</span> <code>(function)</code> Return row with input index <code>i</code>.</p>
<p><span class="help-syntax-special">{trim}</span> <code>(function)</code> Trim elements whitespace. Has signature <code>(direction, indent)</code> and modifies parts in place. Returns parts itself to enable method chaining.</p>
<ul>
<li><p>Possible values of <code>direction</code>: “both” (default), “left”, “right”, “none”. Defines from which side whitespaces should be removed.</p></li>
<li><p>Possible values of <code>indent</code>: “keep” (default), “low”, “high”, “remove”. Defines what to do with possible indent (left whitespace of first string in a row). Value “keep” keeps it; “low” makes all indent equal to the lowest across rows; “high” - highest across rows; “remove” - removes indent.</p></li>
</ul>
</section>
<section id="minialign.as_parts-usage" class="level4">
<h4 class="anchored" data-anchor-id="minialign.as_parts-usage">Usage</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="va">parts</span> <span class="op">=</span> <span class="va">MiniAlign</span><span class="op">.</span>as_parts<span class="op">({</span> <span class="op">{</span> <span class="st">'a'</span><span class="op">,</span> <span class="st">'b'</span> <span class="op">},</span> <span class="op">{</span> <span class="st">'c'</span> <span class="op">}</span> <span class="op">})</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">vim</span><span class="op">.</span>inspect<span class="op">(</span><span class="va">parts</span><span class="op">.</span>get_dims<span class="op">()))</span> <span class="co">-- Should be { row = 2, col = 2 }</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="va">parts</span><span class="op">.</span>apply_inplace<span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">,</span> <span class="va">data</span><span class="op">)</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="st">' '</span> <span class="op">..</span> <span class="va">data</span><span class="op">.</span><span class="va">row</span> <span class="op">..</span> <span class="va">s</span> <span class="op">..</span> <span class="va">data</span><span class="op">.</span><span class="va">col</span> <span class="op">..</span> <span class="st">' '</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span><span class="op">)</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">vim</span><span class="op">.</span>inspect<span class="op">(</span><span class="va">parts</span><span class="op">))</span> <span class="co">-- Should be { { ' 1a1 ', ' 1b2 ' }, { ' 2c1 ' } }</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="va">parts</span><span class="op">.</span>trim<span class="op">(</span><span class="st">'both'</span><span class="op">,</span> <span class="st">'remove'</span><span class="op">).</span>pair<span class="op">()</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="va">vim</span><span class="op">.</span>inspect<span class="op">(</span><span class="va">parts</span><span class="op">))</span> <span class="co">-- Should be { { '1a11b2' }, { '2c1' } }</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="minialign.new_step" class="level3">
<h3 class="anchored" data-anchor-id="minialign.new_step">new_step()</h3>
<p align="center">
<code>MiniAlign.new_step</code>(<span class="help-syntax-special">{name}</span>, <span class="help-syntax-special">{action}</span>)
</p>
<p>Create step</p>
<p>A step is basically a named callable object. Having a name bundled with some action powers helper status message during interactive alignment process.</p>
<section id="minialign.new_step-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.new_step-parameters">Parameters</h4>
<p><span class="help-syntax-special">{name}</span> <code>(string)</code> Step name.</p>
<p><span class="help-syntax-special">{action}</span> <code>(function|table)</code> Step action. Should be a callable object (see <a href="https://neovim.io/doc/user/helptag.html?tag=vim.is_callable()">vim.is_callable()</a>).</p>
</section>
<section id="minialign.new_step-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.new_step-return">Return</h4>
<p><code>(table)</code> A table with keys: <span class="help-syntax-keys">&lt;name&gt;</span> with <code>name</code> argument, <span class="help-syntax-keys">&lt;action&gt;</span> with <code>action</code>.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step">gen_step</h3>
<p align="center">
<code>MiniAlign.gen_step</code>
</p>
<p>Generate common action steps</p>
<p>This is a table with function elements. Call to actually get step.</p>
<p>Each step action is a function that has signature <code>(object, opts)</code>, where <code>object</code> is either parts or array of strings (depends on which stage of alignment process it is assumed to be applied) and <code>opts</code> is table of options.</p>
<p>Outputs of elements named <code>default_*</code> are used as default corresponding main step (split, justify, merge). Behavior of all of them depend on values from supplied options (second argument).</p>
<p>Outputs of other elements depend on both step generator input values and options supplied at execution. This design is mostly because their output can be used several times in pre-steps.</p>
<section id="minialign.gen_step-usage" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step-usage">Usage</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">align</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.align'</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="va">align</span><span class="op">.</span>setup<span class="op">({</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">modifiers</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Use 'T' modifier to remove both whitespace and indent</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">T</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">steps</span><span class="op">,</span> <span class="cn">_</span><span class="op">)</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">steps</span><span class="op">.</span><span class="va">pre_justify</span><span class="op">,</span> <span class="va">align</span><span class="op">.</span><span class="va">gen_step</span><span class="op">.</span>trim<span class="op">(</span><span class="st">'both'</span><span class="op">,</span> <span class="st">'remove'</span><span class="op">))</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span><span class="op">,</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="va">options</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- By default align "right", "left", "right", "left", ...</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">justify_side</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'right'</span><span class="op">,</span> <span class="st">'left'</span> <span class="op">},</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="va">steps</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Align by default only first pair of columns</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="va">pre_justify</span> <span class="op">=</span> <span class="op">{</span> <span class="va">align</span><span class="op">.</span><span class="va">gen_step</span><span class="op">.</span>filter<span class="op">(</span><span class="st">'n == 1'</span><span class="op">)</span> <span class="op">},</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="minialign.gen_step.default_split" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.default_split">gen_step.default_split()</h3>
<p align="center">
<code>MiniAlign.gen_step.default_split</code>()
</p>
<p>Generate default split step</p>
<p>Output splits strings using matches of Lua pattern(s) from <code>split_pattern</code> option which are not dismissed by <code>split_exclude_patterns</code> option.</p>
<p>Outline of how single string is split:</p>
<ul>
<li><p>Convert <code>split_pattern</code> option to array of strings (string is converted as one-element array). This array will be recycled in case there are more split matches than in converted <code>split_pattern</code> array (which almost always).</p></li>
<li><p>Find all forbidden spans (intervals inside string) - all matches of all patterns in <code>split_exclude_patterns</code>.</p></li>
<li><p>Find match for the next pattern. If it is not inside any forbidden span, add preceding unmatched substring and matched split as two parts. Repeat with the next pattern.</p></li>
<li><p>If no pattern match is found, add the rest of string as final part.</p></li>
</ul>
<p>Output uses following options (as part second argument, <code>opts</code> table):</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;split_pattern&gt;</span> - string or array of strings used to detect split matches and create parts. Default: <code>''</code> meaning no matches (whole string is used as part). Examples: <code>'%s+'</code>, <code>{ '&lt;', '&gt;' }</code>.</p></li>
<li><p><span class="help-syntax-keys">&lt;split_exclude_patterns&gt;</span> - array of strings defining which regions to exclude from being matched. Default: <code>{}</code>. Examples: <code>{ '".-"', '^%s*#.*' }</code>.</p></li>
</ul>
<section id="minialign.gen_step.default_split-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.default_split-return">Return</h4>
<p><code>(table)</code> A step named “split” and with appropriate callable action.</p>
</section>
<section id="minialign.gen_step.default_split-seealso" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.default_split-seealso">See also</h4>
<p><a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.ignore_split">MiniAlign.gen_step.ignore_split()</a> heavily uses <code>split_exclude_patterns</code>.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.default_justify" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.default_justify">gen_step.default_justify()</h3>
<p align="center">
<code>MiniAlign.gen_step.default_justify</code>()
</p>
<p>Generate default justify step</p>
<p>Output makes column elements of string parts have equal width by adding left and/or right whitespace padding. Which side(s) to pad is defined by <code>justify_side</code> option. Width of first column can be tweaked with <code>justify_offsets</code> option.</p>
<p>Outline of how parts are justified:</p>
<ul>
<li><p>Convert <code>justify_side</code> option to array of strings (single string is converted as one-element array). Recycle this array to have length equal to number of columns in parts.</p></li>
<li><p>For all columns compute maximum width of strings from it (add offsets from <code>justify_offsets</code> to first column widths). Note: for left alignment, width of last row element does not affect column width. This is mainly because it won’t be padded and helps dealing with “no single match” lines.</p></li>
<li><p>Make all elements have same width inside column by adding appropriate amount of whitespace. Which side(s) to add is controlled by the corresponding <code>justify_side</code> array element. Note: padding is done with spaces which might conflict with tab indentation.</p></li>
</ul>
<p>Output uses following options (as part second argument, <code>opts</code> table):</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;justify_side&gt;</span> - string or array of strings. Each element can be one of “left” (pad right side), “center” (pad both sides equally), “right” (pad left side), “none” (no padding). Default: “left”.</p></li>
<li><p><span class="help-syntax-keys">&lt;justify_offsets&gt;</span> - array of numeric left offsets of rows. Used to adjust for possible not equal indents, like in case of charwise selection when left edge is not on the first column. Default: array of zeros. Set automatically during interactive alignment in charwise mode.</p></li>
</ul>
<section id="minialign.gen_step.default_justify-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.default_justify-return">Return</h4>
<p><code>(table)</code> A step named “justify” and with appropriate callable action.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.default_merge" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.default_merge">gen_step.default_merge()</h3>
<p align="center">
<code>MiniAlign.gen_step.default_merge</code>()
</p>
<p>Generate default merge step</p>
<p>Output merges rows of parts into strings by placing merge delimiter(s) between them.</p>
<p>Outline of how parts are converted to array of strings:</p>
<ul>
<li><p>Convert <code>merge_delimiter</code> option to array of strings (single string is converted as one-element array). Recycle this array to have length equal to number of columns in parts minus 1. Also possibly trim leading whitespace in first merge character to not affect indentation.</p></li>
<li><p>Exclude empty strings from parts. They add nothing to output except extra usage of merge delimiter.</p></li>
<li><p>Concatenate each row interleaving with array of merge delimiters.</p></li>
</ul>
<p>Output uses following options (as part second argument, <code>opts</code> table):</p>
<ul>
<li><span class="help-syntax-keys">&lt;merge_delimiter&gt;</span> - string or array of strings. Default: <code>''</code>. Examples: <code>' '</code>, <code>{ '', ' ' }</code>.</li>
</ul>
<section id="minialign.gen_step.default_merge-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.default_merge-return">Return</h4>
<p><code>(table)</code> A step named “merge” and with appropriate callable action.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.filter" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.filter">gen_step.filter()</h3>
<p align="center">
<code>MiniAlign.gen_step.filter</code>(<span class="help-syntax-special">{expr}</span>)
</p>
<p>Generate filter step</p>
<p>Construct function predicate from supplied Lua string expression and make step evaluating it on every part element.</p>
<p>Outline of how filtering is done:</p>
<ul>
<li><p>Convert Lua filtering expression into function predicate which can be evaluated in manually created context (some specific variables being set).</p></li>
<li><p>Compute boolean mask for parts by applying predicate to each element of 2d array with special variables set to specific values (see next section).</p></li>
<li><p>Group parts with computed mask. See <code>group()</code> method of parts in <a href="../../mini.nvim/doc/mini-align.html#minialign.as_parts">MiniAlign.as_parts()</a>.</p></li>
</ul>
<p>Special variables which can be used in expression:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;row&gt;</span> - row number of current element.</p></li>
<li><p><span class="help-syntax-keys">&lt;ROW&gt;</span> - total number of rows in parts.</p></li>
<li><p><span class="help-syntax-keys">&lt;col&gt;</span> - column number of current element.</p></li>
<li><p><span class="help-syntax-keys">&lt;COL&gt;</span> - total number of columns in current row.</p></li>
<li><p><span class="help-syntax-keys">&lt;s&gt;</span> - string value of current element.</p></li>
<li><p><span class="help-syntax-keys">&lt;n&gt;</span> - column pair number of current element. Useful when filtering by result of pattern splitting.</p></li>
<li><p><span class="help-syntax-keys">&lt;N&gt;</span> - total number of column pairs in current row.</p></li>
<li><p>All variables from global table <code>_G</code>.</p></li>
</ul>
<p>Tips:</p>
<ul>
<li><p>This general filtering approach can be used to both include and exclude certain parts from alignment. Examples:</p>
<ul>
<li><p>Use <code>row ~= 2</code> to align all parts except from second row.</p></li>
<li><p>Use <code>n == 1</code> to align only by first pair of columns.</p></li>
</ul></li>
<li><p>Filtering by last equal sign usually can be done with <code>n &gt;= (N - 1)</code> (because there is usually something to the right of it).</p></li>
</ul>
<section id="minialign.gen_step.filter-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.filter-parameters">Parameters</h4>
<p><span class="help-syntax-special">{expr}</span> <code>(string)</code> Lua expression as a string which will be used as predicate.</p>
</section>
<section id="minialign.gen_step.filter-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.filter-return">Return</h4>
<p><code>(table|nil)</code> A step named “filter” and with appropriate callable action.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.ignore_split" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.ignore_split">gen_step.ignore_split()</h3>
<p align="center">
<code>MiniAlign.gen_step.ignore_split</code>(<span class="help-syntax-special">{patterns}</span>, <span class="help-syntax-special">{exclude_comment}</span>)
</p>
<p>Generate ignore step</p>
<p>Output adds certain values to <code>split_exclude_patterns</code> option. Should be used as pre-split step.</p>
<section id="minialign.gen_step.ignore_split-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.ignore_split-parameters">Parameters</h4>
<p><span class="help-syntax-special">{patterns}</span> <code>(table)</code> Array of patterns to be added to <code>split_exclude_patterns</code> as is. Default: <code>{ [[".-"]] }</code> (excludes strings for most cases).</p>
<p><span class="help-syntax-special">{exclude_comment}</span> <code>(boolean|nil)</code> Whether to add comment pattern to <code>split_exclude_patterns</code>. Comment pattern is derived from ‘commentstring’ option. Default: <code>true</code>.</p>
</section>
<section id="minialign.gen_step.ignore_split-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.ignore_split-return">Return</h4>
<p><code>(table)</code> A step named “ignore” and with appropriate callable action.</p>
</section>
<section id="minialign.gen_step.ignore_split-seealso" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.ignore_split-seealso">See also</h4>
<p><a href="../../mini.nvim/doc/mini-align.html#minialign.gen_step.default_split">MiniAlign.gen_step.default_split()</a> for details about <code>split_exclude_patterns</code> option.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.pair" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.pair">gen_step.pair()</h3>
<p align="center">
<code>MiniAlign.gen_step.pair</code>(<span class="help-syntax-special">{direction}</span>)
</p>
<p>Generate pair step</p>
<p>Output calls <code>pair()</code> method of parts (see <a href="../../mini.nvim/doc/mini-align.html#minialign.as_parts">MiniAlign.as_parts()</a>) with supplied <code>direction</code> argument.</p>
<section id="minialign.gen_step.pair-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.pair-parameters">Parameters</h4>
<p><span class="help-syntax-special">{direction}</span> <code>(string)</code> Which direction to pair. One of “left” (default) or</p>
</section>
<section id="minialign.gen_step.pair-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.pair-return">Return</h4>
<p><code>(table)</code> A step named “pair” and with appropriate callable action.</p>
<hr>
</section>
</section>
<section id="minialign.gen_step.trim" class="level3">
<h3 class="anchored" data-anchor-id="minialign.gen_step.trim">gen_step.trim()</h3>
<p align="center">
<code>MiniAlign.gen_step.trim</code>(<span class="help-syntax-special">{direction}</span>, <span class="help-syntax-special">{indent}</span>)
</p>
<p>Generate trim step</p>
<p>Output calls <code>trim()</code> method of parts (see <a href="../../mini.nvim/doc/mini-align.html#minialign.as_parts">MiniAlign.as_parts()</a>) with supplied <code>direction</code> and <code>indent</code> arguments.</p>
<section id="minialign.gen_step.trim-parameters" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.trim-parameters">Parameters</h4>
<p><span class="help-syntax-special">{direction}</span> <code>(string|nil)</code> Which sides to trim whitespace. One of “both” (default), “left”, “right”, “none”.</p>
<p><span class="help-syntax-special">{indent}</span> <code>(string|nil)</code> What to do with possible indent (left whitespace of first string in a row). One of “keep” (default), “low”, “high”, “remove”.</p>
</section>
<section id="minialign.gen_step.trim-return" class="level4">
<h4 class="anchored" data-anchor-id="minialign.gen_step.trim-return">Return</h4>
<p><code>(table)</code> A step named “trim” and with appropriate callable action.</p>


</section>
</section>

</main> <!-- /main -->
<!-- Original source: https://gc.zgo.at/count.js -->
<!-- Inlined for security reasons (less supply chain attack possibility) -->
<script data-goatcounter="https://nvim-mini.goatcounter.com/count">
// GoatCounter: https://www.goatcounter.com
// This file is released under the ISC license: https://opensource.org/licenses/ISC
;(function() {
	'use strict';

	window.goatcounter = window.goatcounter || {}

	// Load settings from data-goatcounter-settings.
	var s = document.querySelector('script[data-goatcounter]')
	if (s && s.dataset.goatcounterSettings) {
		try         { var set = JSON.parse(s.dataset.goatcounterSettings) }
		catch (err) { console.error('invalid JSON in data-goatcounter-settings: ' + err) }
		for (var k in set)
			if (['no_onload', 'no_events', 'allow_local', 'allow_frame', 'path', 'title', 'referrer', 'event'].indexOf(k) > -1)
				window.goatcounter[k] = set[k]
	}

	var enc = encodeURIComponent

	// Get all data we're going to send off to the counter endpoint.
	window.goatcounter.get_data = function(vars) {
		vars = vars || {}
		var data = {
			p: (vars.path     === undefined ? goatcounter.path     : vars.path),
			r: (vars.referrer === undefined ? goatcounter.referrer : vars.referrer),
			t: (vars.title    === undefined ? goatcounter.title    : vars.title),
			e: !!(vars.event || goatcounter.event),
			s: window.screen.width,
			b: is_bot(),
			q: location.search,
		}

		var rcb, pcb, tcb  // Save callbacks to apply later.
		if (typeof(data.r) === 'function') rcb = data.r
		if (typeof(data.t) === 'function') tcb = data.t
		if (typeof(data.p) === 'function') pcb = data.p

		if (is_empty(data.r)) data.r = document.referrer
		if (is_empty(data.t)) data.t = document.title
		if (is_empty(data.p)) data.p = get_path()

		if (rcb) data.r = rcb(data.r)
		if (tcb) data.t = tcb(data.t)
		if (pcb) data.p = pcb(data.p)
		return data
	}

	// Check if a value is "empty" for the purpose of get_data().
	var is_empty = function(v) { return v === null || v === undefined || typeof(v) === 'function' }

	// See if this looks like a bot; there is some additional filtering on the
	// backend, but these properties can't be fetched from there.
	var is_bot = function() {
		// Headless browsers are probably a bot.
		var w = window, d = document
		if (w.callPhantom || w._phantom || w.phantom)
			return 150
		if (w.__nightmare)
			return 151
		if (d.__selenium_unwrapped || d.__webdriver_evaluate || d.__driver_evaluate)
			return 152
		if (navigator.webdriver)
			return 153
		return 0
	}

	// Object to urlencoded string, starting with a ?.
	var urlencode = function(obj) {
		var p = []
		for (var k in obj)
			if (obj[k] !== '' && obj[k] !== null && obj[k] !== undefined && obj[k] !== false)
				p.push(enc(k) + '=' + enc(obj[k]))
		return '?' + p.join('&')
	}

	// Show a warning in the console.
	var warn = function(msg) {
		if (console && 'warn' in console)
			console.warn('goatcounter: ' + msg)
	}

	// Get the endpoint to send requests to.
	var get_endpoint = function() {
		var s = document.querySelector('script[data-goatcounter]')
		return (s && s.dataset.goatcounter) ? s.dataset.goatcounter : goatcounter.endpoint
	}

	// Get current path.
	var get_path = function() {
		var loc = location,
			c = document.querySelector('link[rel="canonical"][href]')
		if (c) {  // May be relative or point to different domain.
			var a = document.createElement('a')
			a.href = c.href
			if (a.hostname.replace(/^www\./, '') === location.hostname.replace(/^www\./, ''))
				loc = a
		}
		return (loc.pathname + loc.search) || '/'
	}

	// Run function after DOM is loaded.
	var on_load = function(f) {
		if (document.body === null)
			document.addEventListener('DOMContentLoaded', function() { f() }, false)
		else
			f()
	}

	// Filter some requests that we (probably) don't want to count.
	window.goatcounter.filter = function() {
		if ('visibilityState' in document && document.visibilityState === 'prerender')
			return 'visibilityState'
		if (!goatcounter.allow_frame && location !== parent.location)
			return 'frame'
		if (!goatcounter.allow_local && location.hostname.match(/(localhost$|^127\.|^10\.|^172\.(1[6-9]|2[0-9]|3[0-1])\.|^192\.168\.|^0\.0\.0\.0$)/))
			return 'localhost'
		if (!goatcounter.allow_local && location.protocol === 'file:')
			return 'localfile'
		if (localStorage && localStorage.getItem('skipgc') === 't')
			return 'disabled with #toggle-goatcounter'
		return false
	}

	// Get URL to send to GoatCounter.
	window.goatcounter.url = function(vars) {
		var data = window.goatcounter.get_data(vars || {})
		if (data.p === null)  // null from user callback.
			return
		data.rnd = Math.random().toString(36).substr(2, 5)  // Browsers don't always listen to Cache-Control.

		var endpoint = get_endpoint()
		if (!endpoint)
			return warn('no endpoint found')

		return endpoint + urlencode(data)
	}

	// Count a hit.
	window.goatcounter.count = function(vars) {
		var f = goatcounter.filter()
		if (f)
			return warn('not counting because of: ' + f)
		var url = goatcounter.url(vars)
		if (!url)
			return warn('not counting because path callback returned null')

		if (!navigator.sendBeacon(url)) {
			// This mostly fails due to being blocked by CSP; try again with an
			// image-based fallback.
			var img = document.createElement('img')
			img.src = url
			img.style.position = 'absolute'  // Affect layout less.
			img.style.bottom = '0px'
			img.style.width = '1px'
			img.style.height = '1px'
			img.loading = 'eager'
			img.setAttribute('alt', '')
			img.setAttribute('aria-hidden', 'true')

			var rm = function() { if (img && img.parentNode) img.parentNode.removeChild(img) }
			img.addEventListener('load', rm, false)
			document.body.appendChild(img)
		}
	}

	// Get a query parameter.
	window.goatcounter.get_query = function(name) {
		var s = location.search.substr(1).split('&')
		for (var i = 0; i < s.length; i++)
			if (s[i].toLowerCase().indexOf(name.toLowerCase() + '=') === 0)
				return s[i].substr(name.length + 1)
	}

	// Track click events.
	window.goatcounter.bind_events = function() {
		if (!document.querySelectorAll)  // Just in case someone uses an ancient browser.
			return

		var send = function(elem) {
			return function() {
				goatcounter.count({
					event:    true,
					path:     (elem.dataset.goatcounterClick || elem.name || elem.id || ''),
					title:    (elem.dataset.goatcounterTitle || elem.title || (elem.innerHTML || '').substr(0, 200) || ''),
					referrer: (elem.dataset.goatcounterReferrer || elem.dataset.goatcounterReferral || ''),
				})
			}
		}

		Array.prototype.slice.call(document.querySelectorAll("*[data-goatcounter-click]")).forEach(function(elem) {
			if (elem.dataset.goatcounterBound)
				return
			var f = send(elem)
			elem.addEventListener('click', f, false)
			elem.addEventListener('auxclick', f, false)  // Middle click.
			elem.dataset.goatcounterBound = 'true'
		})
	}

	// Add a "visitor counter" frame or image.
	window.goatcounter.visit_count = function(opt) {
		on_load(function() {
			opt        = opt        || {}
			opt.type   = opt.type   || 'html'
			opt.append = opt.append || 'body'
			opt.path   = opt.path   || get_path()
			opt.attr   = opt.attr   || {width: '200', height: (opt.no_branding ? '60' : '80')}

			opt.attr['src'] = get_endpoint() + 'er/' + enc(opt.path) + '.' + enc(opt.type) + '?'
			if (opt.no_branding) opt.attr['src'] += '&no_branding=1'
			if (opt.style)       opt.attr['src'] += '&style=' + enc(opt.style)
			if (opt.start)       opt.attr['src'] += '&start=' + enc(opt.start)
			if (opt.end)         opt.attr['src'] += '&end='   + enc(opt.end)

			var tag = {png: 'img', svg: 'img', html: 'iframe'}[opt.type]
			if (!tag)
				return warn('visit_count: unknown type: ' + opt.type)

			if (opt.type === 'html') {
				opt.attr['frameborder'] = '0'
				opt.attr['scrolling']   = 'no'
			}

			var d = document.createElement(tag)
			for (var k in opt.attr)
				d.setAttribute(k, opt.attr[k])

			var p = document.querySelector(opt.append)
			if (!p)
				return warn('visit_count: element to append to not found: ' + opt.append)
			p.appendChild(d)
		})
	}

	// Make it easy to skip your own views.
	if (location.hash === '#toggle-goatcounter') {
		if (localStorage.getItem('skipgc') === 't') {
			localStorage.removeItem('skipgc', 't')
			alert('GoatCounter tracking is now ENABLED in this browser.')
		}
		else {
			localStorage.setItem('skipgc', 't')
			alert('GoatCounter tracking is now DISABLED in this browser until ' + location + ' is loaded again.')
		}
	}

	if (!goatcounter.no_onload)
		on_load(function() {
			// 1. Page is visible, count request.
			// 2. Page is not yet visible; wait until it switches to 'visible' and count.
			// See #487
			if (!('visibilityState' in document) || document.visibilityState === 'visible')
				goatcounter.count()
			else {
				var f = function(e) {
					if (document.visibilityState !== 'visible')
						return
					document.removeEventListener('visibilitychange', f)
					goatcounter.count()
				}
				document.addEventListener('visibilitychange', f)
			}

			if (!goatcounter.no_events)
				goatcounter.bind_events()
		})
})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/echasnovski\.github\.io\/mini-site");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© Evgeni Chasnovski, <a href="https://choosealicense.com/licenses/mit/">MIT</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>