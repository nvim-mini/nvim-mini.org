<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mini.ai documentation – MINI</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//assets/logo-mini_180x180.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0ed1a58f1961f20e100ea025a42ebf64.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-fdc1b2fd0a2d1e1fd2f41bfe1f0ec5c1.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-3e1533199cf0bf1e072b6c22d59bf330.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-8fb413afc8e529ea6f0b69a7c79bd225.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": "tree",
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style> .quarto-title > h1.title { display: none } </style>


<meta property="og:title" content="mini.ai documentation – MINI">
<meta property="og:description" content="Modular Independent Neovim Improvements">
<meta property="og:image" content="https://nvim-mini.org/assets/logo-mini_xmas-social.png">
<meta property="og:site_name" content="MINI">
<meta property="og:image:height" content="630">
<meta property="og:image:width" content="1200">
<meta name="twitter:title" content="mini.ai documentation – MINI">
<meta name="twitter:description" content="Modular Independent Neovim Improvements">
<meta name="twitter:image" content="https://nvim-mini.org/assets/logo-mini_xmas-social.png">
<meta name="twitter:image-height" content="630">
<meta name="twitter:image-width" content="1200">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const queryPrefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const darkModeDefault = queryPrefersDark.matches;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    queryPrefersDark.addEventListener("change", e => {
      if(window.localStorage.getItem("quarto-color-scheme") !== null)
        return;
      const alternate = e.matches
      toggleColorMode(alternate);
      localAlternateSentinel = e.matches ? 'alternate' : 'default'; // this is used alongside local storage!
      toggleGiscusIfUsed(alternate, darkModeDefault);
    });
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MINI</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../mini.nvim/index.html"> 
<span class="menu-text">mini.nvim</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../MiniMax/index.html"> 
<span class="menu-text">MiniMax</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/nvim-mini"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog/index.xml"> <i class="bi bi-rss-fill" role="img" aria-label="RSS">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#module" id="toc-module" class="nav-link active" data-scroll-target="#module">Module</a>
  <ul>
  <li><a href="#module-setup" id="toc-module-setup" class="nav-link" data-scroll-target="#module-setup">Setup</a></li>
  <li><a href="#module-comparisons" id="toc-module-comparisons" class="nav-link" data-scroll-target="#module-comparisons">Comparisons</a></li>
  <li><a href="#module-disabling" id="toc-module-disabling" class="nav-link" data-scroll-target="#module-disabling">Disabling</a></li>
  </ul></li>
  <li><a href="#miniai-builtin-textobjects" id="toc-miniai-builtin-textobjects" class="nav-link" data-scroll-target="#miniai-builtin-textobjects">Builtin textobjects</a></li>
  <li><a href="#miniai-glossary" id="toc-miniai-glossary" class="nav-link" data-scroll-target="#miniai-glossary">Glossary</a>
  <ul>
  <li><a href="#miniai-glossary-region" id="toc-miniai-glossary-region" class="nav-link" data-scroll-target="#miniai-glossary-region">REGION</a></li>
  <li><a href="#miniai-glossary-pattern" id="toc-miniai-glossary-pattern" class="nav-link" data-scroll-target="#miniai-glossary-pattern">PATTERN</a></li>
  <li><a href="#miniai-glossary-span" id="toc-miniai-glossary-span" class="nav-link" data-scroll-target="#miniai-glossary-span">SPAN</a></li>
  <li><a href="#miniai-glossary-nestedpattern" id="toc-miniai-glossary-nestedpattern" class="nav-link" data-scroll-target="#miniai-glossary-nestedpattern">NESTED PATTERN</a></li>
  <li><a href="#miniai-glossary-spanmatchesnestedpattern" id="toc-miniai-glossary-spanmatchesnestedpattern" class="nav-link" data-scroll-target="#miniai-glossary-spanmatchesnestedpattern">SPAN MATCHES NESTED PATTERN</a></li>
  <li><a href="#miniai-glossary-composedpattern" id="toc-miniai-glossary-composedpattern" class="nav-link" data-scroll-target="#miniai-glossary-composedpattern">COMPOSED PATTERN</a></li>
  <li><a href="#miniai-glossary-spanmatchescomposedpattern" id="toc-miniai-glossary-spanmatchescomposedpattern" class="nav-link" data-scroll-target="#miniai-glossary-spanmatchescomposedpattern">SPAN MATCHES COMPOSED PATTERN</a></li>
  </ul></li>
  <li><a href="#miniai-textobject-specification" id="toc-miniai-textobject-specification" class="nav-link" data-scroll-target="#miniai-textobject-specification">Textobject specification</a></li>
  <li><a href="#miniai-algorithm" id="toc-miniai-algorithm" class="nav-link" data-scroll-target="#miniai-algorithm">Algorithm</a></li>
  <li><a href="#miniai.setup" id="toc-miniai.setup" class="nav-link" data-scroll-target="#miniai.setup">setup()</a>
  <ul>
  <li><a href="#miniai.setup-parameters" id="toc-miniai.setup-parameters" class="nav-link" data-scroll-target="#miniai.setup-parameters">Parameters</a></li>
  <li><a href="#miniai.setup-usage" id="toc-miniai.setup-usage" class="nav-link" data-scroll-target="#miniai.setup-usage">Usage</a></li>
  </ul></li>
  <li><a href="#miniai.config" id="toc-miniai.config" class="nav-link" data-scroll-target="#miniai.config">config</a>
  <ul>
  <li><a href="#miniai.config-defaults" id="toc-miniai.config-defaults" class="nav-link" data-scroll-target="#miniai.config-defaults">Defaults</a></li>
  <li><a href="#miniai.config-customtextobjects" id="toc-miniai.config-customtextobjects" class="nav-link" data-scroll-target="#miniai.config-customtextobjects">Custom textobjects</a></li>
  <li><a href="#miniai.config-searchmethod" id="toc-miniai.config-searchmethod" class="nav-link" data-scroll-target="#miniai.config-searchmethod">Search method</a></li>
  <li><a href="#miniai.config-mappings" id="toc-miniai.config-mappings" class="nav-link" data-scroll-target="#miniai.config-mappings">Mappings</a></li>
  </ul></li>
  <li><a href="#miniai.find_textobject" id="toc-miniai.find_textobject" class="nav-link" data-scroll-target="#miniai.find_textobject">find_textobject()</a>
  <ul>
  <li><a href="#miniai.find_textobject-parameters" id="toc-miniai.find_textobject-parameters" class="nav-link" data-scroll-target="#miniai.find_textobject-parameters">Parameters</a></li>
  <li><a href="#miniai.find_textobject-return" id="toc-miniai.find_textobject-return" class="nav-link" data-scroll-target="#miniai.find_textobject-return">Return</a></li>
  </ul></li>
  <li><a href="#miniai.move_cursor" id="toc-miniai.move_cursor" class="nav-link" data-scroll-target="#miniai.move_cursor">move_cursor()</a>
  <ul>
  <li><a href="#miniai.move_cursor-parameters" id="toc-miniai.move_cursor-parameters" class="nav-link" data-scroll-target="#miniai.move_cursor-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#miniai.gen_spec" id="toc-miniai.gen_spec" class="nav-link" data-scroll-target="#miniai.gen_spec">gen_spec</a></li>
  <li><a href="#miniai.gen_spec.argument" id="toc-miniai.gen_spec.argument" class="nav-link" data-scroll-target="#miniai.gen_spec.argument">gen_spec.argument()</a>
  <ul>
  <li><a href="#miniai.gen_spec.argument-parameters" id="toc-miniai.gen_spec.argument-parameters" class="nav-link" data-scroll-target="#miniai.gen_spec.argument-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#miniai.gen_spec.function_call" id="toc-miniai.gen_spec.function_call" class="nav-link" data-scroll-target="#miniai.gen_spec.function_call">gen_spec.function_call()</a>
  <ul>
  <li><a href="#miniai.gen_spec.function_call-parameters" id="toc-miniai.gen_spec.function_call-parameters" class="nav-link" data-scroll-target="#miniai.gen_spec.function_call-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#miniai.gen_spec.pair" id="toc-miniai.gen_spec.pair" class="nav-link" data-scroll-target="#miniai.gen_spec.pair">gen_spec.pair()</a>
  <ul>
  <li><a href="#miniai.gen_spec.pair-parameters" id="toc-miniai.gen_spec.pair-parameters" class="nav-link" data-scroll-target="#miniai.gen_spec.pair-parameters">Parameters</a></li>
  </ul></li>
  <li><a href="#miniai.gen_spec.treesitter" id="toc-miniai.gen_spec.treesitter" class="nav-link" data-scroll-target="#miniai.gen_spec.treesitter">gen_spec.treesitter()</a>
  <ul>
  <li><a href="#miniai.gen_spec.treesitter-parameters" id="toc-miniai.gen_spec.treesitter-parameters" class="nav-link" data-scroll-target="#miniai.gen_spec.treesitter-parameters">Parameters</a></li>
  <li><a href="#miniai.gen_spec.treesitter-return" id="toc-miniai.gen_spec.treesitter-return" class="nav-link" data-scroll-target="#miniai.gen_spec.treesitter-return">Return</a></li>
  <li><a href="#miniai.gen_spec.treesitter-seealso" id="toc-miniai.gen_spec.treesitter-seealso" class="nav-link" data-scroll-target="#miniai.gen_spec.treesitter-seealso">See also</a></li>
  </ul></li>
  <li><a href="#miniai.gen_spec.user_prompt" id="toc-miniai.gen_spec.user_prompt" class="nav-link" data-scroll-target="#miniai.gen_spec.user_prompt">gen_spec.user_prompt()</a>
  <ul>
  <li><a href="#miniai.gen_spec.user_prompt-return" id="toc-miniai.gen_spec.user_prompt-return" class="nav-link" data-scroll-target="#miniai.gen_spec.user_prompt-return">Return</a></li>
  </ul></li>
  <li><a href="#miniai.select_textobject" id="toc-miniai.select_textobject" class="nav-link" data-scroll-target="#miniai.select_textobject">select_textobject()</a>
  <ul>
  <li><a href="#miniai.select_textobject-parameters" id="toc-miniai.select_textobject-parameters" class="nav-link" data-scroll-target="#miniai.select_textobject-parameters">Parameters</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">mini.ai documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Generated from the <code>main</code> branch of ‘mini.nvim’</em></p>
<p><a name="mini.ai" href="../../mini.nvim/doc/mini-ai.html#mini.ai"><b>mini.ai</b></a> Extend and create a/i textobjects</p>
<p>MIT License Copyright (c) 2022 Evgeni Chasnovski</p>
<hr>
<section id="module" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="module">Module</h3>
<p>Enhance some builtin <a href="https://neovim.io/doc/user/helptag.html?tag=text-objects">text-objects</a> (like <a href="https://neovim.io/doc/user/helptag.html?tag=a(">a(</a>, <a href="https://neovim.io/doc/user/helptag.html?tag=a)">a)</a>, <a href="https://neovim.io/doc/user/helptag.html?tag=a'">a’</a>, and more), create new ones (like <code>a*</code>, <code>a&lt;Space&gt;</code>, <code>af</code>, <code>a?</code>, and more), and allow user to create their own.</p>
<p>Features:</p>
<ul>
<li><p>Customizable creation of <code>a</code>/<code>i</code> textobjects using Lua patterns and functions. Supports:</p>
<ul>
<li><p>Dot-repeat.</p></li>
<li><p><a href="https://neovim.io/doc/user/helptag.html?tag=v:count">v:count</a>.</p></li>
<li><p>Different search methods (see <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a>).</p></li>
<li><p>Consecutive application (update selection without leaving Visual mode).</p></li>
<li><p>Aliases for multiple textobjects.</p></li>
</ul></li>
<li><p>Comprehensive builtin textobjects (see more in <a href="../../mini.nvim/doc/mini-ai.html#miniai-builtin-textobjects">MiniAi-builtin-textobjects</a>):</p>
<ul>
<li><p>Balanced brackets (with and without whitespace) plus alias.</p></li>
<li><p>Balanced quotes plus alias.</p></li>
<li><p>Function call.</p></li>
<li><p>Argument.</p></li>
<li><p>Tag.</p></li>
<li><p>Derived from user prompt.</p></li>
<li><p>Default for anything but Latin letters (to fall back to <a href="https://neovim.io/doc/user/helptag.html?tag=text-objects">text-objects</a>).</p></li>
</ul>
<p>For more textobjects see <a href="../../mini.nvim/doc/mini-extra.html#miniextra.gen_ai_spec">MiniExtra.gen_ai_spec</a>.</p></li>
<li><p>Motions for jumping to left/right edge of textobject.</p></li>
<li><p>Set of specification generators to tweak some builtin textobjects (see <a href="../../mini.nvim/doc/mini-ai.html#miniai.gen_spec">MiniAi.gen_spec</a>).</p></li>
<li><p>Treesitter textobjects (through <a href="../../mini.nvim/doc/mini-ai.html#miniai.gen_spec.treesitter">MiniAi.gen_spec.treesitter()</a> helper).</p></li>
</ul>
<p>This module works by defining mappings for both <code>a</code> and <code>i</code> in Visual and Operator-pending mode. After typing, they wait for single character user input treated as textobject identifier and apply resolved textobject specification (fall back to other mappings if can’t find proper textobject id). For more information see <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a> and <a href="../../mini.nvim/doc/mini-ai.html#miniai-algorithm">MiniAi-algorithm</a>.</p>
<p>Known issues which won’t be resolved:</p>
<ul>
<li><p>Search for builtin textobjects is done mostly using Lua patterns (regex-like approach). Certain amount of false positives is to be expected.</p></li>
<li><p>During search for builtin textobjects there is no distinction if it is inside string or comment. For example, in the following case there will be wrong match for a function call: <code>f(a = ")", b = 1)</code>.</p></li>
</ul>
<p>General rule of thumb: any instrument using available parser for document structure (like treesitter) will usually provide more precise results. This module has builtins mostly for plain text textobjects which are useful most of the times (like “inside brackets”, “around quotes/underscore”, etc.). For advanced use cases define function specification for custom textobjects.</p>
<p>What it doesn’t (and probably won’t) do:</p>
<ul>
<li>Have special operators to specially handle whitespace (like <code>I</code> and <code>A</code> in ‘targets.vim’). Whitespace handling is assumed to be done inside textobject specification (like <code>i(</code> and <code>i)</code> handle whitespace differently).</li>
</ul>
<section id="module-setup" class="level4">
<h4 class="anchored" data-anchor-id="module-setup">Setup</h4>
<p>This module needs a setup with <code>require('mini.ai').setup({})</code> (replace <code>{}</code> with your <code>config</code> table). It will create global Lua table <code>MiniAi</code> which you can use for scripting or manually (with <code>:lua MiniAi.*</code>).</p>
<p>See <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a> for available config settings.</p>
<p>You can override runtime config settings (like <code>config.custom_textobjects</code>) locally to buffer inside <code>vim.b.miniai_config</code> which should have same structure as <code>MiniAi.config</code>. See <a href="../../mini.nvim/doc/mini-nvim.html#mini.nvim-buffer-local-config">mini.nvim-buffer-local-config</a> for more details.</p>
<p>To stop module from showing non-error feedback, set <code>config.silent = true</code>.</p>
</section>
<section id="module-comparisons" class="level4">
<h4 class="anchored" data-anchor-id="module-comparisons">Comparisons</h4>
<ul>
<li><p><a href="https://github.com/wellle/targets.vim">wellle/targets.vim</a>:</p>
<ul>
<li><p>Has limited support for creating own textobjects: it is constrained to pre-defined detection rules. ‘mini.ai’ allows creating own rules via Lua patterns and functions (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a>).</p></li>
<li><p>Doesn’t provide any programmatical API for getting information about textobjects. ‘mini.ai’ does it via <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a>.</p></li>
<li><p>Has no implementation of “moving to edge of textobject”. ‘mini.ai’ does it via <a href="../../mini.nvim/doc/mini-ai.html#miniai.move_cursor">MiniAi.move_cursor()</a> and <code>g[</code> and <code>g]</code> default mappings.</p></li>
<li><p>Both implement the notion of manual “next”/“last” search directions.</p></li>
<li><p>Implements <code>A</code>, <code>I</code> operators. ‘mini.ai’ does not by design: it is assumed to be a property of textobject, not operator.</p></li>
<li><p>Doesn’t implement “function call” and “user prompt” textobjects. ‘mini.ai’ does (with <code>f</code> and <code>?</code> identifiers).</p></li>
<li><p>Has limited support for “argument” textobject. Although it works in most situations, it often misdetects commas as argument separator (like if it is inside quotes or <code>{}</code>). ‘mini.ai’ deals with these cases.</p></li>
</ul></li>
<li><p><a href="https://github.com/nvim-treesitter/nvim-treesitter-textobjects">nvim-treesitter/nvim-treesitter-textobjects</a>:</p>
<ul>
<li><p>Along with textobject functionality provides a curated and maintained set of popular textobject queries for many languages (which can power <a href="../../mini.nvim/doc/mini-ai.html#miniai.gen_spec.treesitter">MiniAi.gen_spec.treesitter()</a> functionality).</p></li>
<li><p>Both support working with <a href="https://neovim.io/doc/user/helptag.html?tag=treesitter-directives">treesitter-directives</a> allowing more fine-tuned textobjects.</p></li>
<li><p>Implements only textobjects based on treesitter.</p></li>
<li><p>Doesn’t support <a href="https://neovim.io/doc/user/helptag.html?tag=v:count">v:count</a>.</p></li>
<li><p>Doesn’t support multiple search method (basically, only ‘cover’).</p></li>
<li><p>Doesn’t support consecutive application of target textobject.</p></li>
</ul></li>
</ul>
</section>
<section id="module-disabling" class="level4">
<h4 class="anchored" data-anchor-id="module-disabling">Disabling</h4>
<p>To disable, set <code>vim.g.miniai_disable</code> (globally) or <code>vim.b.miniai_disable</code> (for a buffer) to <code>true</code>. Considering high number of different scenarios and customization intentions, writing exact rules for disabling module’s functionality is left to user. See <a href="../../mini.nvim/doc/mini-nvim.html#mini.nvim-disabling-recipes">mini.nvim-disabling-recipes</a> for common recipes.</p>
<hr>
</section>
</section>
<section id="miniai-builtin-textobjects" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai-builtin-textobjects">Builtin textobjects</h3>
<p>This table describes all builtin textobjects along with what they represent. Explanation:</p>
<ul>
<li><p><code>Key</code> represents the textobject identifier: single character which should be typed after <code>a</code>/<code>i</code>.</p></li>
<li><p><code>Name</code> is a description of textobject.</p></li>
<li><p><code>Example line</code> contains a string for which examples are constructed. The <code>*</code> denotes the cursor position.</p></li>
<li><p><code>a</code>/<code>i</code> describe inclusive region representing <code>a</code> and <code>i</code> textobjects. Use numbers in separators for easier navigation.</p></li>
<li><p><code>2a</code>/<code>2i</code> describe either <code>2a</code>/<code>2i</code> (support for <a href="https://neovim.io/doc/user/helptag.html?tag=v:count">v:count</a>) textobjects or <code>a</code>/<code>i</code> textobject followed by another <code>a</code>/<code>i</code> textobject (consecutive application leads to incremental selection).</p></li>
</ul>
<p>Example: typing <code>va)</code> with cursor on <code>*</code> leads to selection from column 2 to column 12. Another typing <code>a)</code> changes selection to [1; 13]. Also, besides visual selection, any <a href="https://neovim.io/doc/user/helptag.html?tag=operator">operator</a> can be used or <code>g[</code>/<code>g]</code> motions to move to left/right edge of <code>a</code> textobject.</p>
<pre><code>┌───┬───────────────┬──────────────────┬────────┬────────┬────────┬────────┐
│Key│     Name      │   Example line   │   a    │   i    │   2a   │   2i   │
├───┴───────────────┴──────────────────┴────────┴────────┴────────┴────────┤
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ ( │  Balanced ()  │ (( *a (bb) ))    │        │        │        │        │
│ [ │  Balanced []  │ [[ *a [bb] ]]    │ [2;12] │ [4;10] │ [1;13] │ [2;12] │
│ { │  Balanced {}  │ {{ *a {bb} }}    │        │        │        │        │
│ &lt; │  Balanced &lt;&gt;  │ &lt;&lt; *a &lt;bb&gt; &gt;&gt;    │        │        │        │        │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ ) │  Balanced ()  │ (( *a (bb) ))    │        │        │        │        │
│ ] │  Balanced []  │ [[ *a [bb] ]]    │        │        │        │        │
│ } │  Balanced {}  │ {{ *a {bb} }}    │ [2;12] │ [3;11] │ [1;13] │ [2;12] │
│ &gt; │  Balanced &lt;&gt;  │ &lt;&lt; *a &lt;bb&gt; &gt;&gt;    │        │        │        │        │
│ b │  Alias for    │ [( *a {bb} )]    │        │        │        │        │
│   │  ), ], or }   │                  │        │        │        │        │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ " │  Balanced "   │ "*a" " bb "      │        │        │        │        │
│ ' │  Balanced '   │ '*a' ' bb '      │        │        │        │        │
│ ` │  Balanced `   │ `*a` ` bb `      │ [1;4]  │ [2;3]  │ [6;11] │ [7;10] │
│ q │  Alias for    │ '*a' " bb "      │        │        │        │        │
│   │  ", ', or `   │                  │        │        │        │        │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ ? │  User prompt  │ e*e o e o o      │ [3;5]  │ [4;4]  │ [7;9]  │ [8;8]  │
│   │(typed e and o)│                  │        │        │        │        │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ t │      Tag      │ &lt;x&gt;&lt;y&gt;*a&lt;/y&gt;&lt;/x&gt; │ [4;12] │ [7;8]  │ [1;16] │ [4;12] │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ f │ Function call │ f(a, g(*b, c) )  │ [6;13] │ [8;12] │ [1;15] │ [3;14] │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│ a │   Argument    │ f(*a, g(b, c) )  │ [3;5]  │ [3;4]  │ [5;14] │ [7;13] │
├┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈1234567890123456┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┤
│   │    Default    │ aa_*b__cc___     │ [4;7]  │ [4;5]  │ [8;12] │ [8;9]  │
│   │   (typed _)   │                  │        │        │        │        │
└───┴───────────────┴──────────────────┴────────┴────────┴────────┴────────┘</code></pre>
<p>Notes:</p>
<ul>
<li><p>All examples assume default <code>config.search_method</code>.</p></li>
<li><p>Open brackets differ from close brackets by how they treat inner edge whitespace for <code>i</code> textobject: open ignores it, close - includes.</p></li>
<li><p>Default textobject is activated for identifiers which are not Latin letters. They are designed to be treated as separators, so include only right edge in <code>a</code> textobject. To include both edges, use custom textobjects (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a> and <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a>). Note:</p>
<ul>
<li>When cursor is exactly on the identifier character while there are two matching candidates on both left and right, the resulting region with smaller width is preferred.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="miniai-glossary" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai-glossary">Glossary</h3>
<p>Note: this is similar to <a href="../../mini.nvim/doc/mini-surround.html#minisurround-glossary">MiniSurround-glossary</a>.</p>
<section id="miniai-glossary-region" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-region">REGION</h4>
<p>Table representing region in a buffer. Fields:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;from&gt;</span> and <span class="help-syntax-keys">&lt;to&gt;</span> for inclusive start and end positions (<span class="help-syntax-keys">&lt;to&gt;</span> might be <code>nil</code> to describe empty region). Each position is also a table with line <span class="help-syntax-keys">&lt;line&gt;</span> and column <span class="help-syntax-keys">&lt;col&gt;</span> (both start at 1).</p></li>
<li><p><span class="help-syntax-keys">&lt;vis_mode&gt;</span> for which Visual mode will be used to select textobject. See <code>opts</code> argument of <a href="../../mini.nvim/doc/mini-ai.html#miniai.select_textobject">MiniAi.select_textobject()</a>. One of <code>'v'</code>, <code>'V'</code>, <code>'\22'</code> (escaped <code>'&lt;C-v&gt;'</code>).</p></li>
</ul>
<p>Examples:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">},</span> <span class="va">to</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">2</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">}</span> <span class="op">}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Forced linewise mode</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">},</span> <span class="va">to</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">2</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">},</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">vis_mode</span> <span class="op">=</span> <span class="st">'V'</span><span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Empty region</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">10</span> <span class="op">}</span> <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="miniai-glossary-pattern" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-pattern">PATTERN</h4>
<p>String describing Lua pattern.</p>
</section>
<section id="miniai-glossary-span" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-span">SPAN</h4>
<p>Interval inside a string (end-exclusive). Like [1, 5). Equal <code>from</code> and <code>to</code> edges describe empty span at that point.</p>
<p>Span <code>A = [a1, a2)</code> covers <code>B = [b1, b2)</code> if every element of <code>B</code> is within <code>A</code> (<code>a1 &lt;= b &lt; a2</code>). It also is described as “B is nested inside A”.</p>
</section>
<section id="miniai-glossary-nestedpattern" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-nestedpattern">NESTED PATTERN</h4>
<p>Array of patterns aimed to describe nested spans.</p>
</section>
<section id="miniai-glossary-spanmatchesnestedpattern" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-spanmatchesnestedpattern">SPAN MATCHES NESTED PATTERN</h4>
<p>If there is a sequence of consecutively nested spans each matching corresponding pattern within substring of previous span (or input string for first span). Example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Nested patterns for balanced `()` with inner space</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'^. .* .$'</span> <span class="op">}</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Example input string (with columns underneath for easier reading):</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">"( ( () ( ) ) )"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">--  12345678901234</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Here are all matching spans [1, 15) and [3, 13). Both [5, 7) and [8, 10) match first pattern but not second. All other combinations of <code>(</code> and <code>)</code> don’t match first pattern (not balanced).</p>
</section>
<section id="miniai-glossary-composedpattern" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-composedpattern">COMPOSED PATTERN</h4>
<p>Array with each element describing possible pattern (or array of them) at that place. Composed pattern basically defines all possible combinations of nested pattern (their cartesian product). Examples:</p>
<ol type="1">
<li><p>Either balanced <code>()</code> or balanced <code>[]</code> but both with inner edge space:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Composed pattern</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'%b[]'</span> <span class="op">},</span> <span class="st">'^. .* .$'</span> <span class="op">}</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Composed pattern expanded into equivalent array of nested patterns</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'^. .* .$'</span> <span class="op">}</span> <span class="co">-- and</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%b[]'</span><span class="op">,</span> <span class="st">'^. .* .$'</span> <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Either “balanced <code>()</code> with inner edge space” or “balanced <code>[]</code> with no inner edge space”, both with 5 or more characters:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Composed pattern</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="op">{</span> <span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'^. .* .$'</span> <span class="op">},</span> <span class="op">{</span> <span class="st">'%b[]'</span><span class="op">,</span> <span class="st">'^.[^ ].*[^ ].$'</span> <span class="op">}</span> <span class="op">},</span> <span class="st">'.....'</span> <span class="op">}</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Composed pattern expanded into equivalent array of nested patterns</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'^. .* .$'</span><span class="op">,</span> <span class="st">'.....'</span> <span class="op">}</span> <span class="co">-- and</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%b[]'</span><span class="op">,</span> <span class="st">'^.[^ ].*[^ ].$'</span><span class="op">,</span> <span class="st">'.....'</span> <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ol>
</section>
<section id="miniai-glossary-spanmatchescomposedpattern" class="level4">
<h4 class="anchored" data-anchor-id="miniai-glossary-spanmatchescomposedpattern">SPAN MATCHES COMPOSED PATTERN</h4>
<p>If it matches at least one nested pattern from expanded composed pattern.</p>
<hr>
</section>
</section>
<section id="miniai-textobject-specification" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai-textobject-specification">Textobject specification</h3>
<p>Textobject specification has a structure of composed pattern (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-glossary">MiniAi-glossary</a>) with two differences:</p>
<ul>
<li><p>Last pattern(s) should have even number of empty capture groups denoting how the last string should be processed to extract <code>a</code> or <code>i</code> textobject:</p>
<ul>
<li><p>Zero captures mean that whole string represents both <code>a</code> and <code>i</code>. Example: <code>xxx</code> will define textobject matching string <code>xxx</code> literally.</p></li>
<li><p>Two captures represent <code>i</code> textobject inside of them. <code>a</code> - whole string. Example: <code>x()x()x</code> defines <code>a</code> textobject to be <code>xxx</code>, <code>i</code> - middle <code>x</code>.</p></li>
<li><p>Four captures define <code>a</code> textobject inside captures 1 and 4, <code>i</code> - inside captures 2 and 3. Example: <code>x()()x()x()</code> defines <code>a</code> textobject to be last <code>xx</code>, <code>i</code> - middle <code>x</code>.</p></li>
</ul></li>
<li><p>Allows callable objects (see <a href="https://neovim.io/doc/user/helptag.html?tag=vim.is_callable()">vim.is_callable()</a>) in certain places (enables more complex textobjects in exchange of increase in configuration complexity and computations):</p>
<ul>
<li><p>If specification itself is a callable, it will be called with the same arguments as <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a> and should return one of:</p>
<ul>
<li><p>Composed pattern. Useful for implementing user input. Example of simplified variant of textobject for function call with name taken from user prompt:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">()</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">left_edge</span> <span class="op">=</span> <span class="va">vim</span><span class="op">.</span>pesc<span class="op">(</span><span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>input<span class="op">(</span><span class="st">'Function name: '</span><span class="op">))</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">{</span> <span class="va">left_edge</span> <span class="op">..</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'^.-%(().*()%)$'</span> <span class="op">}</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Single output region. Useful to allow full control over textobject. Will be taken as is. Example of returning whole buffer:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">()</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">}</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">to</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span> <span class="op">=</span> <span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>line<span class="op">(</span><span class="st">'$'</span><span class="op">),</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">col</span> <span class="op">=</span> <span class="fu">math.max</span><span class="op">(</span><span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>getline<span class="op">(</span><span class="st">'$'</span><span class="op">):</span><span class="fu">len</span><span class="op">(),</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">{</span> <span class="va">from</span> <span class="op">=</span> <span class="va">from</span><span class="op">,</span> <span class="va">to</span> <span class="op">=</span> <span class="va">to</span><span class="op">,</span> <span class="va">vis_mode</span> <span class="op">=</span> <span class="st">'V'</span> <span class="op">}</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Array of output region(s). Useful for incorporating other instruments, like treesitter (see <a href="../../mini.nvim/doc/mini-ai.html#miniai.gen_spec.treesitter">MiniAi.gen_spec.treesitter()</a>). The best region will be picked in the same manner as with composed pattern (respecting options <code>n_lines</code>, <code>search_method</code>, etc.). Example of selecting “best” line with display width more than 80:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">(</span><span class="cn">_</span><span class="op">,</span> <span class="cn">_</span><span class="op">,</span> <span class="cn">_</span><span class="op">)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">res</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="va">i</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">vim</span><span class="op">.</span><span class="va">api</span><span class="op">.</span>nvim_buf_line_count<span class="op">(</span><span class="dv">0</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">cur_line</span> <span class="op">=</span> <span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>getline<span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>strdisplaywidth<span class="op">(</span><span class="va">cur_line</span><span class="op">)</span> <span class="op">&gt;</span> <span class="dv">80</span> <span class="cf">then</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">region</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="va">i</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">},</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">to</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="va">i</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="va">cur_line</span><span class="op">:</span><span class="fu">len</span><span class="op">()</span> <span class="op">},</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">res</span><span class="op">,</span> <span class="va">region</span><span class="op">)</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">res</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul></li>
<li><p>If there is a callable instead of assumed string pattern, it is expected to have signature <code>(line, init)</code> and behave like <code>pattern:find()</code>. It should return two numbers representing span in <code>line</code> next after or at <code>init</code> (<code>nil</code> if there is no such span). !IMPORTANT NOTE!: it means that output’s <code>from</code> shouldn’t be strictly to the left of <code>init</code> (it will lead to infinite loop). Not allowed as last item (as it should be pattern with captures). Example of matching only balanced parenthesis with big enough width:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'%b()'</span><span class="op">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">,</span> <span class="va">init</span><span class="op">)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">init</span> <span class="op">&gt;</span> <span class="dv">1</span> <span class="kw">or</span> <span class="va">s</span><span class="op">:</span><span class="fu">len</span><span class="op">()</span> <span class="op">&lt;</span> <span class="dv">5</span> <span class="cf">then</span> <span class="cf">return</span> <span class="cf">end</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">,</span> <span class="va">s</span><span class="op">:</span><span class="fu">len</span><span class="op">()</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span><span class="op">,</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'^.().*().$'</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul></li>
</ul>
<p>More examples:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Pair of balanced brackets from set (used for builtin `b` identifier):</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="op">{</span> <span class="st">'%b()'</span><span class="op">,</span> <span class="st">'%b[]'</span><span class="op">,</span> <span class="st">'%b{}'</span> <span class="op">},</span> <span class="st">'^.().*().$'</span> <span class="op">}</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Imitate word ignoring digits and punctuation (only for Latin alphabet):</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'()()%f[%w]%w+()[ </span><span class="sc">\t</span><span class="st">]*()'</span> <span class="op">}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Word with camel case support (also supports only Latin alphabet):</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'%u[%l%d]+%f[^%l%d]'</span><span class="op">,</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'%f[%S][%l%d]+%f[^%l%d]'</span><span class="op">,</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'%f[%P][%l%d]+%f[^%l%d]'</span><span class="op">,</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'^[%l%d]+%f[^%l%d]'</span><span class="op">,</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">'^().*()$'</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">-- Number:</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%f[%d]%d+'</span> <span class="op">}</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">-- Date in 'YYYY-MM-DD' format:</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'()%d%d%d%d%-%d%d%-%d%d()'</span> <span class="op">}</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">-- Lua block string:</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="st">'%[%[().-()%]%]'</span> <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>See <a href="../../mini.nvim/doc/mini-ai.html#miniai.gen_spec">MiniAi.gen_spec</a> for function wrappers to create commonly used textobject specifications.</p>
<hr>
</section>
<section id="miniai-algorithm" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai-algorithm">Algorithm</h3>
<p>Search for the textobjects relies on these principles:</p>
<ul>
<li><p>It uses same input data as described in <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a>, i.e.&nbsp;whether it is <code>a</code> or <code>i</code> textobject, its identifier, reference region, etc.</p></li>
<li><p>Textobject specification is constructed based on textobject identifier (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a>).</p></li>
<li><p>General search is done by converting some 2d buffer region (neighborhood of reference region) into 1d string (each line is appended with <code>\n</code>). Then search for a best span matching textobject specification is done inside string (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-glossary">MiniAi-glossary</a>). After that, span is converted back into 2d region. Note: first search is done inside reference region lines, and only after that - inside its neighborhood within <code>config.n_lines</code> (see <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a>).</p></li>
<li><p>The best matching span is chosen by iterating over all spans matching textobject specification and comparing them with “current best”. Comparison also depends on reference region (tighter covering is better, otherwise closer is better) and search method (if span is even considered).</p></li>
<li><p>Extract span based on extraction pattern (last item in nested pattern).</p></li>
<li><p>If task is to perform a consecutive search (<code>opts.n_times</code> is greater than 1), steps are repeated with current best match becoming reference region. One such additional step is also done if final region is equal to reference region (this enables consecutive application).</p></li>
</ul>
<p>Notes:</p>
<ul>
<li><p>Iteration over all matched spans is done in depth-first fashion with respect to nested pattern.</p></li>
<li><p>It is guaranteed that span is compared only once.</p></li>
<li><p>For the sake of increasing functionality, during iteration over all matching spans, some Lua patterns in composed pattern are handled specially.</p>
<ul>
<li><p><code>%bxx</code> (<code>xx</code> is two identical characters). It denotes balanced pair of identical characters and results into “paired” matches. For example, <code>%b""</code> for <code>"aa" "bb"</code> would match <code>"aa"</code> and <code>"bb"</code>, but not middle <code>" "</code>.</p></li>
<li><p><code>x.-y</code> (<code>x</code> and <code>y</code> are different strings). It results only in matches with smallest width. For example, <code>e.-o</code> for <code>e e o o</code> will result only in middle <code>e o</code>. Note: it has some implications for when parts have quantifiers (like <code>+</code>, etc.), which usually can be resolved with frontier pattern <code>%f[]</code> (see examples in <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a>).</p></li>
</ul></li>
</ul>
<hr>
</section>
<section id="miniai.setup" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.setup">setup()</h3>
<p align="center">
<code>MiniAi.setup</code>(<span class="help-syntax-special">{config}</span>)
</p>
<p>Module setup</p>
<section id="miniai.setup-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.setup-parameters">Parameters</h4>
<p><span class="help-syntax-special">{config}</span> <code>(table|nil)</code> Module config table. See <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a>.</p>
</section>
<section id="miniai.setup-usage" class="level4">
<h4 class="anchored" data-anchor-id="miniai.setup-usage">Usage</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span>setup<span class="op">()</span> <span class="co">-- use default config</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- OR</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span>setup<span class="op">({})</span> <span class="co">-- replace {} with your config table</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="miniai.config" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.config">config</h3>
<p align="center">
<code>MiniAi.config</code>
</p>
<section id="miniai.config-defaults" class="level4">
<h4 class="anchored" data-anchor-id="miniai.config-defaults">Defaults</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="va">MiniAi</span><span class="op">.</span><span class="va">config</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Table with textobject id as fields, textobject specification as values.</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Also use this to disable builtin textobjects. See |MiniAi.config|.</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">custom_textobjects</span> <span class="op">=</span> <span class="kw">nil</span><span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Module mappings. Use `''` (empty string) to disable one.</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="va">mappings</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Main textobject prefixes</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">around</span> <span class="op">=</span> <span class="st">'a'</span><span class="op">,</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">inside</span> <span class="op">=</span> <span class="st">'i'</span><span class="op">,</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Next/last textobjects</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- </span><span class="al">NOTE</span><span class="co">: These override built-in LSP selection mappings on Neovim&gt;=0.12</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Map LSP selection manually to use it (see `:h MiniAi.config`)</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="va">around_next</span> <span class="op">=</span> <span class="st">'an'</span><span class="op">,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="va">inside_next</span> <span class="op">=</span> <span class="st">'in'</span><span class="op">,</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="va">around_last</span> <span class="op">=</span> <span class="st">'al'</span><span class="op">,</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="va">inside_last</span> <span class="op">=</span> <span class="st">'il'</span><span class="op">,</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Move cursor to corresponding edge of `a` textobject</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="va">goto_left</span> <span class="op">=</span> <span class="st">'g['</span><span class="op">,</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="va">goto_right</span> <span class="op">=</span> <span class="st">'g]'</span><span class="op">,</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Number of lines within which textobject is searched</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="va">n_lines</span> <span class="op">=</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- How to search for object (first inside current line, then inside</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- neighborhood). One of 'cover', 'cover_or_next', 'cover_or_prev',</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- 'cover_or_nearest', 'next', 'prev', 'nearest'.</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  <span class="va">search_method</span> <span class="op">=</span> <span class="st">'cover_or_next'</span><span class="op">,</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Whether to disable showing non-error feedback</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- This also affects (purely informational) helper messages shown after</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- idle time if user input is required.</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="va">silent</span> <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="miniai.config-customtextobjects" class="level4">
<h4 class="anchored" data-anchor-id="miniai.config-customtextobjects">Custom textobjects</h4>
<p>User can define own textobjects by supplying <code>config.custom_textobjects</code>. It should be a table with keys being single character textobject identifier (supported by <a href="https://neovim.io/doc/user/helptag.html?tag=getcharstr()">getcharstr()</a>) and values - textobject specification (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a>).</p>
<p>General recommendations:</p>
<ul>
<li><p>This can be used to override builtin ones (<a href="../../mini.nvim/doc/mini-ai.html#miniai-builtin-textobjects">MiniAi-builtin-textobjects</a>). Supply non-valid input (not in specification format) to disable module’s builtin textobject in favor of external or Neovim’s builtin mapping.</p></li>
<li><p>Keys should use character representation which can be <a href="https://neovim.io/doc/user/helptag.html?tag=getcharstr()">getcharstr()</a> output. For example, <code>'\r'</code> and not <code>'&lt;CR&gt;'</code>.</p></li>
</ul>
<p>Examples:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span>setup<span class="op">({</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">custom_textobjects</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Tweak argument textobject</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">a</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span><span class="va">gen_spec</span><span class="op">.</span>argument<span class="op">({</span> <span class="va">brackets</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'%b()'</span> <span class="op">}</span> <span class="op">}),</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Disable brackets alias in favor of builtin block textobject</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">b</span> <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Now `vax` should select `xxx` and `vix` - middle `x`</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">x</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'x()x()x'</span> <span class="op">},</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Whole buffer</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="va">g</span> <span class="op">=</span> <span class="kw">function</span><span class="op">()</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">line</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">col</span> <span class="op">=</span> <span class="dv">1</span> <span class="op">}</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">to</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="va">line</span> <span class="op">=</span> <span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>line<span class="op">(</span><span class="st">'$'</span><span class="op">),</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        <span class="va">col</span> <span class="op">=</span> <span class="fu">math.max</span><span class="op">(</span><span class="va">vim</span><span class="op">.</span><span class="va">fn</span><span class="op">.</span>getline<span class="op">(</span><span class="st">'$'</span><span class="op">):</span><span class="fu">len</span><span class="op">(),</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="op">{</span> <span class="va">from</span> <span class="op">=</span> <span class="va">from</span><span class="op">,</span> <span class="va">to</span> <span class="op">=</span> <span class="va">to</span> <span class="op">}</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use `vim.b.miniai_config` to customize per buffer</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">-- Example of specification useful for Markdown files:</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">spec_pair</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span><span class="va">gen_spec</span><span class="op">.</span><span class="va">pair</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="va">vim</span><span class="op">.</span><span class="va">b</span><span class="op">.</span><span class="va">miniai_config</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="va">custom_textobjects</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'*'</span><span class="op">]</span> <span class="op">=</span> spec_pair<span class="op">(</span><span class="st">'*'</span><span class="op">,</span> <span class="st">'*'</span><span class="op">,</span> <span class="op">{</span> <span class="fu">type</span> <span class="op">=</span> <span class="st">'greedy'</span> <span class="op">}),</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'_'</span><span class="op">]</span> <span class="op">=</span> spec_pair<span class="op">(</span><span class="st">'_'</span><span class="op">,</span> <span class="st">'_'</span><span class="op">,</span> <span class="op">{</span> <span class="fu">type</span> <span class="op">=</span> <span class="st">'greedy'</span> <span class="op">}),</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">},</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There are more example specifications in <a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a>.</p>
</section>
<section id="miniai.config-searchmethod" class="level4">
<h4 class="anchored" data-anchor-id="miniai.config-searchmethod">Search method</h4>
<p>Value of <code>config.search_method</code> defines how best match search is done. Based on its value, one of the following matches will be selected:</p>
<ul>
<li><p>Covering match. Left/right edge is before/after left/right edge of reference region.</p></li>
<li><p>Previous match. Left/right edge is before left/right edge of reference region.</p></li>
<li><p>Next match. Left/right edge is after left/right edge of reference region.</p></li>
<li><p>Nearest match. Whichever is closest among previous and next matches.</p></li>
</ul>
<p>Possible values are:</p>
<ul>
<li><p><code>'cover'</code> - use only covering match. Don’t use either previous or next; report that there is no textobject found.</p></li>
<li><p><code>'cover_or_next'</code> (default) - use covering match. If not found, use next.</p></li>
<li><p><code>'cover_or_prev'</code> - use covering match. If not found, use previous.</p></li>
<li><p><code>'cover_or_nearest'</code> - use covering match. If not found, use nearest.</p></li>
<li><p><code>'next'</code> - use next match.</p></li>
<li><p><code>'prev'</code> - use previous match.</p></li>
<li><p><code>'nearest'</code> - use nearest match.</p></li>
</ul>
<p>Note: search is first performed on the reference region lines and only after failure - on the whole neighborhood defined by <code>config.n_lines</code>. This means that with <code>config.search_method</code> not equal to <code>'cover'</code>, “prev” or “next” textobject will end up as search result if they are found on first stage although covering match might be found in bigger, whole neighborhood. This design is based on observation that most of the time operation is done within reference region lines (usually cursor line).</p>
<p>Here is an example of what <code>a)</code> textobject is based on a value of <code>'config.search_method'</code> when cursor is inside <code>bbb</code> word:</p>
<ul>
<li><p><code>'cover'</code>: <code>(a) bbb (c)</code> -&gt; none</p></li>
<li><p><code>'cover_or_next'</code>: <code>(a) bbb (c)</code> -&gt; <code>(c)</code></p></li>
<li><p><code>'cover_or_prev'</code>: <code>(a) bbb (c)</code> -&gt; <code>(a)</code></p></li>
<li><p><code>'cover_or_nearest'</code>: depends on cursor position. For first and second <code>b</code> - as in <code>cover_or_prev</code> (as previous match is nearer), for third - as in <code>cover_or_next</code> (as next match is nearer).</p></li>
<li><p><code>'next'</code>: <code>(a) bbb (c)</code> -&gt; <code>(c)</code>. Same outcome for <code>(bbb)</code>.</p></li>
<li><p><code>'prev'</code>: <code>(a) bbb (c)</code> -&gt; <code>(a)</code>. Same outcome for <code>(bbb)</code>.</p></li>
<li><p><code>'nearest'</code>: depends on cursor position (same as in <code>'cover_or_nearest'</code>).</p></li>
</ul>
</section>
<section id="miniai.config-mappings" class="level4">
<h4 class="anchored" data-anchor-id="miniai.config-mappings">Mappings</h4>
<p>Mappings <code>around_next</code> / <code>inside_next</code> and <code>around_last</code> / <code>inside_last</code> are essentially <code>around</code> / <code>inside</code> but using search method <code>'next'</code> and <code>'prev'</code>.</p>
<p>NOTE: with default config, built-in LSP mappings <a href="https://neovim.io/doc/user/helptag.html?tag=v_an">v_an</a> and <a href="https://neovim.io/doc/user/helptag.html?tag=v_in">v_in</a> on Neovim&gt;=0.12 are overridden. Either use different <code>around_next</code> / <code>inside_next</code> keys or map manually using <a href="https://neovim.io/doc/user/helptag.html?tag=vim.lsp.buf.selection_range()">vim.lsp.buf.selection_range()</a>. For example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">map_lsp_selection</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">lhs</span><span class="op">,</span> <span class="va">desc</span><span class="op">)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">s</span> <span class="op">=</span> <span class="va">vim</span><span class="op">.</span>startswith<span class="op">(</span><span class="va">desc</span><span class="op">,</span> <span class="st">'Increase'</span><span class="op">)</span> <span class="kw">and</span> <span class="dv">1</span> <span class="kw">or</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">rhs</span> <span class="op">=</span> <span class="kw">function</span><span class="op">()</span> <span class="va">vim</span><span class="op">.</span><span class="va">lsp</span><span class="op">.</span><span class="va">buf</span><span class="op">.</span>selection_range<span class="op">(</span><span class="va">s</span> <span class="op">*</span> <span class="va">vim</span><span class="op">.</span><span class="va">v</span><span class="op">.</span><span class="va">count1</span><span class="op">)</span> <span class="kw">end</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">vim</span><span class="op">.</span><span class="va">keymap</span><span class="op">.</span>set<span class="op">(</span><span class="st">'x'</span><span class="op">,</span> <span class="va">lhs</span><span class="op">,</span> <span class="va">rhs</span><span class="op">,</span> <span class="op">{</span> <span class="va">desc</span> <span class="op">=</span> <span class="va">desc</span> <span class="op">})</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>map_lsp_selection<span class="op">(</span><span class="st">'&lt;Leader&gt;ls'</span><span class="op">,</span> <span class="st">'Increase selection'</span><span class="op">)</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>map_lsp_selection<span class="op">(</span><span class="st">'&lt;Leader&gt;lS'</span><span class="op">,</span> <span class="st">'Decrease selection'</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="miniai.find_textobject" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.find_textobject">find_textobject()</h3>
<p align="center">
<code>MiniAi.find_textobject</code>(<span class="help-syntax-special">{ai_type}</span>, <span class="help-syntax-special">{id}</span>, <span class="help-syntax-special">{opts}</span>)
</p>
<p>Find textobject region</p>
<section id="miniai.find_textobject-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.find_textobject-parameters">Parameters</h4>
<p><span class="help-syntax-special">{ai_type}</span> <code>(string)</code> One of <code>'a'</code> or <code>'i'</code>.</p>
<p><span class="help-syntax-special">{id}</span> <code>(string)</code> Single character string representing textobject id. It is used to get specification which is later used to compute textobject region. Note: if specification is a function, it is called with all present arguments (<code>opts</code> is populated with default arguments).</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Possible fields:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;n_lines&gt;</span> - Number of lines within which textobject is searched. Default: <code>config.n_lines</code> (see <a href="../../mini.nvim/doc/mini-ai.html#miniai.config">MiniAi.config</a>).</p></li>
<li><p><span class="help-syntax-keys">&lt;n_times&gt;</span> - Number of times to perform a consecutive search. Each one is done with reference region being previous found textobject region. Default: 1.</p></li>
<li><p><span class="help-syntax-keys">&lt;reference_region&gt;</span> - region to try to cover (see <a href="../../mini.nvim/doc/mini-ai.html#miniai-glossary">MiniAi-glossary</a>). It is guaranteed that output region will not be inside or equal to this one. Default: empty region at cursor position.</p></li>
<li><p><span class="help-syntax-keys">&lt;search_method&gt;</span> - Search method. Default: <code>config.search_method</code>.</p></li>
</ul>
</section>
<section id="miniai.find_textobject-return" class="level4">
<h4 class="anchored" data-anchor-id="miniai.find_textobject-return">Return</h4>
<p><code>(table|nil)</code> Region of textobject or <code>nil</code> if no textobject different from <code>opts.reference_region</code> was consecutively found <code>opts.n_times</code> times.</p>
<hr>
</section>
</section>
<section id="miniai.move_cursor" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.move_cursor">move_cursor()</h3>
<p align="center">
<code>MiniAi.move_cursor</code>(<span class="help-syntax-special">{side}</span>, <span class="help-syntax-special">{ai_type}</span>, <span class="help-syntax-special">{id}</span>, <span class="help-syntax-special">{opts}</span>)
</p>
<p>Move cursor to edge of textobject</p>
<section id="miniai.move_cursor-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.move_cursor-parameters">Parameters</h4>
<p><span class="help-syntax-special">{side}</span> <code>(string)</code> One of <code>'left'</code> or <code>'right'</code>.</p>
<p><span class="help-syntax-special">{ai_type}</span> <code>(string)</code> One of <code>'a'</code> or <code>'i'</code>.</p>
<p><span class="help-syntax-special">{id}</span> <code>(string)</code> Single character string representing textobject id.</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Same as in <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a>. <code>opts.n_times</code> means number of actual jumps (important when cursor already on the potential jump spot).</p>
<hr>
</section>
</section>
<section id="miniai.gen_spec" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec">gen_spec</h3>
<p align="center">
<code>MiniAi.gen_spec</code>
</p>
<p>Generate common textobject specifications</p>
<p>This is a table with function elements. Call to actually get specification.</p>
<p>Example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">gen_spec</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span><span class="va">gen_spec</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span>setup<span class="op">({</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">custom_textobjects</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Tweak argument to be recognized only inside `()` between `;`</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">a</span> <span class="op">=</span> <span class="va">gen_spec</span><span class="op">.</span>argument<span class="op">({</span> <span class="va">brackets</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'%b()'</span> <span class="op">},</span> <span class="va">separator</span> <span class="op">=</span> <span class="st">';'</span> <span class="op">}),</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Tweak function call to not detect dot in function name</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="va">f</span> <span class="op">=</span> <span class="va">gen_spec</span><span class="op">.</span>function_call<span class="op">({</span> <span class="va">name_pattern</span> <span class="op">=</span> <span class="st">'[%w_]'</span> <span class="op">}),</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Function definition (needs treesitter queries with these captures)</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">F</span> <span class="op">=</span> <span class="va">gen_spec</span><span class="op">.</span>treesitter<span class="op">({</span> <span class="va">a</span> <span class="op">=</span> <span class="st">'@function.outer'</span><span class="op">,</span> <span class="va">i</span> <span class="op">=</span> <span class="st">'@function.inner'</span> <span class="op">}),</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Make `|` select both edges in non-balanced way</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">'|'</span><span class="op">]</span> <span class="op">=</span> <span class="va">gen_spec</span><span class="op">.</span>pair<span class="op">(</span><span class="st">'|'</span><span class="op">,</span> <span class="st">'|'</span><span class="op">,</span> <span class="op">{</span> <span class="fu">type</span> <span class="op">=</span> <span class="st">'non-balanced'</span> <span class="op">}),</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="miniai.gen_spec.argument" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec.argument">gen_spec.argument()</h3>
<p align="center">
<code>MiniAi.gen_spec.argument</code>(<span class="help-syntax-special">{opts}</span>)
</p>
<p>Argument specification</p>
<p>Argument textobject (has default <code>a</code> identifier) is a region inside balanced bracket between allowed not excluded separators. Use this function to tweak how it works.</p>
<p>Examples:</p>
<ul>
<li><p><code>argument({ brackets = { '%b()' } })</code> will search for an argument only inside balanced <code>()</code>.</p></li>
<li><p><code>argument({ separator = '[,;]' })</code> will treat both <code>,</code> and <code>;</code> as separators.</p></li>
<li><p><code>argument({ exclude_regions = { '%b()' } })</code> will exclude separators which are inside balanced <code>()</code> (inside outer brackets).</p></li>
</ul>
<section id="miniai.gen_spec.argument-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.argument-parameters">Parameters</h4>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Allowed fields:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;brackets&gt;</span> - array of patterns for outer balanced brackets. Default: <code>{ '%b()', '%b[]', '%b{}' }</code> (any <code>()</code>, <code>[]</code>, or <code>{}</code> can enclose arguments).</p></li>
<li><p><span class="help-syntax-keys">&lt;separator&gt;</span> - separator pattern. Default: <code>','</code>. One of the practical usages of this option is to include whitespace around character to be a part of separator. For example, <code>'%s*,%s*'</code> will treat as separator not only ‘,’, but its possible surrounding whitespace. This has both positive and negative effects. On one hand, <code>daa</code> executed over the first argument will delete whitespace after first comma, leading to a more expected outcome. On the other hand it is ambiguous which argument is picked when cursor is over whitespace near the character separator.</p></li>
<li><p><span class="help-syntax-keys">&lt;exclude_regions&gt;</span> - array with patterns for regions inside which separators will be ignored. Default: <code>{ '%b""', "%b''", '%b()', '%b[]', '%b{}' }</code> (separators inside balanced quotes or brackets are ignored).</p></li>
</ul>
<hr>
</section>
</section>
<section id="miniai.gen_spec.function_call" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec.function_call">gen_spec.function_call()</h3>
<p align="center">
<code>MiniAi.gen_spec.function_call</code>(<span class="help-syntax-special">{opts}</span>)
</p>
<p>Function call specification</p>
<p>Function call textobject (has default <code>f</code> identifier) is a region with some characters followed by balanced <code>()</code>. Use this function to tweak how it works.</p>
<p>Example:</p>
<ul>
<li><code>function_call({ name_pattern = '[%w_]' })</code> will recognize function name with only alphanumeric or underscore (not dot).</li>
</ul>
<section id="miniai.gen_spec.function_call-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.function_call-parameters">Parameters</h4>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Allowed fields:</p>
<ul>
<li><span class="help-syntax-keys">&lt;name_pattern&gt;</span> - string pattern of character set allowed in function name. Default: <code>'[%w_%.]'</code> (alphanumeric, underscore, or dot). Note: should be enclosed in <code>[]</code>.</li>
</ul>
<hr>
</section>
</section>
<section id="miniai.gen_spec.pair" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec.pair">gen_spec.pair()</h3>
<p align="center">
<code>MiniAi.gen_spec.pair</code>(<span class="help-syntax-special">{left}</span>, <span class="help-syntax-special">{right}</span>, <span class="help-syntax-special">{opts}</span>)
</p>
<p>Pair specification</p>
<p>Use it to define textobject for region surrounded with <code>left</code> from left and <code>right</code> from right. The <code>a</code> textobject includes both edges, <code>i</code> - excludes them.</p>
<p>Region can be one of several types (controlled with <code>opts.type</code>). All examples are for default search method, <code>a</code> textobject, and use <code>'_'</code> as both <code>left</code> and <code>right</code>:</p>
<ul>
<li><p>Non-balanced (<code>{ type = 'non-balanced' }</code>), default. Equivalent to using <code>x.-y</code> as first pattern. Example: on line ‘<em>a_b_c</em>’ it consecutively matches ‘<em>a</em>’, ‘<em>b</em>’, ‘<em>c</em>’.</p></li>
<li><p>Balanced (<code>{ type = 'balanced' }</code>). Equivalent to using <code>%bxy</code> as first pattern. Example: on line ‘<em>a_b_c</em>’ it consecutively matches ‘<em>a</em>’, ‘<em>c</em>’. Note: both <code>left</code> and <code>right</code> should be single character.</p></li>
<li><p>Greedy (<code>{ type = 'greedy' }</code>). Like non-balanced but will select maximum consecutive <code>left</code> and <code>right</code> edges. Example: on line ’__a_<em>b</em>’ it consecutively selects ‘<strong>a</strong>’ and ’__b_’. Note: both <code>left</code> and <code>right</code> should be single character.</p></li>
</ul>
<section id="miniai.gen_spec.pair-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.pair-parameters">Parameters</h4>
<p><span class="help-syntax-special">{left}</span> <code>(string)</code> Left edge.</p>
<p><span class="help-syntax-special">{right}</span> <code>(string)</code> Right edge.</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Possible fields:</p>
<ul>
<li><span class="help-syntax-keys">&lt;type&gt;</span> - Type of a pair. One of <code>'non-balanced'</code> (default), <code>'balanced'</code>, <code>'greedy'</code>.</li>
</ul>
<hr>
</section>
</section>
<section id="miniai.gen_spec.treesitter" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec.treesitter">gen_spec.treesitter()</h3>
<p align="center">
<code>MiniAi.gen_spec.treesitter</code>(<span class="help-syntax-special">{ai_captures}</span>, <span class="help-syntax-special">{opts}</span>)
</p>
<p>Treesitter specification</p>
<p>This is a specification in function form. When called with a pair of treesitter captures, it returns a specification function outputting an array of regions that match corresponding (<code>a</code> or <code>i</code>) capture.</p>
<p>In order for this to work, apart from working treesitter parser for desired language, user should have a reachable language-specific ‘textobjects’ query (see <a href="https://neovim.io/doc/user/helptag.html?tag=vim.treesitter.query.get()">vim.treesitter.query.get()</a>). The most straightforward way for this is to have ‘textobjects.scm’ query file with treesitter captures stored in some recognized path. This is primarily designed to be compatible with plugin ‘nvim-treesitter/nvim-treesitter-textobjects’, but can be used without it.</p>
<p>Two most common approaches for having a query file:</p>
<ul>
<li><p>Install ‘nvim-treesitter/nvim-treesitter-textobjects’. It has curated and well maintained builtin query files for many languages with a standardized capture names, like <code>function.outer</code>, <code>function.inner</code>, etc.</p></li>
<li><p>Manually create file ‘after/queries/<language name="">/textobjects.scm’ in your <a href="https://neovim.io/doc/user/helptag.html?tag=$XDG_CONFIG_HOME">$XDG_CONFIG_HOME</a> directory. It should contain queries with captures (later used to define textobjects). See <a href="https://neovim.io/doc/user/helptag.html?tag=lua-treesitter-query">lua-treesitter-query</a>. To verify that query file is reachable, run (example for “lua” language, output should have at least an intended file):</language></p>
<pre class="vim"><code>:lua print(vim.inspect(vim.treesitter.query.get_files('lua','textobjects')))</code></pre></li>
</ul>
<p>Example configuration for function definition textobject with ‘nvim-treesitter/nvim-treesitter-textobjects’ captures:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">spec_treesitter</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span><span class="va">gen_spec</span><span class="op">.</span><span class="va">treesitter</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span><span class="op">(</span><span class="st">'mini.ai'</span><span class="op">).</span>setup<span class="op">({</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">custom_textobjects</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="cn">F</span> <span class="op">=</span> spec_treesitter<span class="op">({</span> <span class="va">a</span> <span class="op">=</span> <span class="st">'@function.outer'</span><span class="op">,</span> <span class="va">i</span> <span class="op">=</span> <span class="st">'@function.inner'</span> <span class="op">}),</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">o</span> <span class="op">=</span> spec_treesitter<span class="op">({</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'@conditional.outer'</span><span class="op">,</span> <span class="st">'@loop.outer'</span> <span class="op">},</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>      <span class="va">i</span> <span class="op">=</span> <span class="op">{</span> <span class="st">'@conditional.inner'</span><span class="op">,</span> <span class="st">'@loop.inner'</span> <span class="op">},</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">})</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Notes:</p>
<ul>
<li><p>Be sure that query files don’t contain unknown <a href="https://neovim.io/doc/user/helptag.html?tag=treesitter-directives">treesitter-directives</a> (like <code>#make-range!</code>, for example). Otherwise textobject for such capture might not be found as <a href="https://neovim.io/doc/user/helptag.html?tag=lua-treesitter-core">lua-treesitter-core</a> won’t treat them as captures. Verify with <code>:=vim.treesitter.query.get('lang', 'textobjects')</code> and see if the target capture is recognized as one.</p></li>
<li><p>It uses buffer’s <a href="https://neovim.io/doc/user/helptag.html?tag=filetype">filetype</a> to determine query language.</p></li>
<li><p>On large files it is slower than pattern-based textobjects. Still very fast though (one search should be magnitude of milliseconds or tens of milliseconds on really large file).</p></li>
</ul>
<section id="miniai.gen_spec.treesitter-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.treesitter-parameters">Parameters</h4>
<p><span class="help-syntax-special">{ai_captures}</span> <code>(table)</code> Captures for <code>a</code> and <code>i</code> textobjects: table with <span class="help-syntax-keys">&lt;a&gt;</span> and <span class="help-syntax-keys">&lt;i&gt;</span> fields with captures for <code>a</code> and <code>i</code> textobjects respectively. Each value can be either a string capture (should start with <code>'@'</code>) or an array of such captures (best among all matches will be chosen).</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Options. Possible values:</p>
<ul>
<li><span class="help-syntax-keys">&lt;use_nvim_treesitter&gt;</span> - whether to try to use ‘nvim-treesitter’ plugin (if present) to do the query. It used to implement more advanced behavior and more coherent experience if ‘nvim-treesitter-textobjects’ queries are used. However, as <a href="https://neovim.io/doc/user/helptag.html?tag=lua-treesitter-core">lua-treesitter-core</a> methods are more capable now, the option will soon be removed. Only present for backward compatibility. Default: <code>false</code>.</li>
</ul>
</section>
<section id="miniai.gen_spec.treesitter-return" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.treesitter-return">Return</h4>
<p><code>(function)</code> Function with <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a> signature which returns array of current buffer regions representing matches for corresponding (<code>a</code> or <code>i</code>) treesitter capture.</p>
</section>
<section id="miniai.gen_spec.treesitter-seealso" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.treesitter-seealso">See also</h4>
<ul>
<li><p><a href="../../mini.nvim/doc/mini-ai.html#miniai-textobject-specification">MiniAi-textobject-specification</a> for how this type of textobject specification is processed.</p></li>
<li><p><a href="https://neovim.io/doc/user/helptag.html?tag=vim.treesitter.query.get()">vim.treesitter.query.get()</a> for how query is fetched.</p></li>
<li><p><a href="https://neovim.io/doc/user/helptag.html?tag=Query:iter_captures()">Query:iter_captures()</a> for how all query captures are iterated in case of no ‘nvim-treesitter’.</p></li>
</ul>
<hr>
</section>
</section>
<section id="miniai.gen_spec.user_prompt" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.gen_spec.user_prompt">gen_spec.user_prompt()</h3>
<p align="center">
<code>MiniAi.gen_spec.user_prompt</code>()
</p>
<p>Specification from user prompt</p>
<ul>
<li><p>Ask user for left and right textobject edges as raw strings (no pattern).</p></li>
<li><p>Construct specification for a textobject that matches from left edge string to right edge string: <code>a</code> includes both strings, <code>i</code> only insides.</p></li>
</ul>
<p>Used for <a href="../../mini.nvim/doc/mini-ai.html#miniai-builtin-textobjects">MiniAi-builtin-textobjects</a> with identifier <code>?</code>.</p>
<section id="miniai.gen_spec.user_prompt-return" class="level4">
<h4 class="anchored" data-anchor-id="miniai.gen_spec.user_prompt-return">Return</h4>
<p><code>(function)</code> Textobject specification as function.</p>
<hr>
</section>
</section>
<section id="miniai.select_textobject" class="level3 help-syntax-right-anchor">
<h3 class="help-syntax-right-anchor anchored" data-anchor-id="miniai.select_textobject">select_textobject()</h3>
<p align="center">
<code>MiniAi.select_textobject</code>(<span class="help-syntax-special">{ai_type}</span>, <span class="help-syntax-special">{id}</span>, <span class="help-syntax-special">{opts}</span>)
</p>
<p>Visually select textobject region</p>
<p>Does nothing if no region is found.</p>
<section id="miniai.select_textobject-parameters" class="level4">
<h4 class="anchored" data-anchor-id="miniai.select_textobject-parameters">Parameters</h4>
<p><span class="help-syntax-special">{ai_type}</span> <code>(string)</code> One of <code>'a'</code> or <code>'i'</code>.</p>
<p><span class="help-syntax-special">{id}</span> <code>(string)</code> Single character string representing textobject id.</p>
<p><span class="help-syntax-special">{opts}</span> <code>(table|nil)</code> Same as in <a href="../../mini.nvim/doc/mini-ai.html#miniai.find_textobject">MiniAi.find_textobject()</a>. Extra fields:</p>
<ul>
<li><p><span class="help-syntax-keys">&lt;vis_mode&gt;</span> - One of <code>'v'</code>, <code>'V'</code>, or <code>'\22'</code> (escaped version of <code>'&lt;C-v&gt;'</code>). Default: Latest visual mode.</p></li>
<li><p><span class="help-syntax-keys">&lt;operator_pending&gt;</span> - Whether selection is for Operator-pending mode. Used in that mode’s mappings, shouldn’t be used directly. Default: <code>false</code>.</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<!-- Original source: https://gc.zgo.at/count.js -->
<!-- Inlined for security reasons (less supply chain attack possibility) -->
<script data-goatcounter="https://nvim-mini.goatcounter.com/count">
// GoatCounter: https://www.goatcounter.com
// This file is released under the ISC license: https://opensource.org/licenses/ISC
;(function() {
	'use strict';

	window.goatcounter = window.goatcounter || {}

	// Load settings from data-goatcounter-settings.
	var s = document.querySelector('script[data-goatcounter]')
	if (s && s.dataset.goatcounterSettings) {
		try         { var set = JSON.parse(s.dataset.goatcounterSettings) }
		catch (err) { console.error('invalid JSON in data-goatcounter-settings: ' + err) }
		for (var k in set)
			if (['no_onload', 'no_events', 'allow_local', 'allow_frame', 'path', 'title', 'referrer', 'event'].indexOf(k) > -1)
				window.goatcounter[k] = set[k]
	}

	var enc = encodeURIComponent

	// Get all data we're going to send off to the counter endpoint.
	window.goatcounter.get_data = function(vars) {
		vars = vars || {}
		var data = {
			p: (vars.path     === undefined ? goatcounter.path     : vars.path),
			r: (vars.referrer === undefined ? goatcounter.referrer : vars.referrer),
			t: (vars.title    === undefined ? goatcounter.title    : vars.title),
			e: !!(vars.event || goatcounter.event),
			s: window.screen.width,
			b: is_bot(),
			q: location.search,
		}

		var rcb, pcb, tcb  // Save callbacks to apply later.
		if (typeof(data.r) === 'function') rcb = data.r
		if (typeof(data.t) === 'function') tcb = data.t
		if (typeof(data.p) === 'function') pcb = data.p

		if (is_empty(data.r)) data.r = document.referrer
		if (is_empty(data.t)) data.t = document.title
		if (is_empty(data.p)) data.p = get_path()

		if (rcb) data.r = rcb(data.r)
		if (tcb) data.t = tcb(data.t)
		if (pcb) data.p = pcb(data.p)
		return data
	}

	// Check if a value is "empty" for the purpose of get_data().
	var is_empty = function(v) { return v === null || v === undefined || typeof(v) === 'function' }

	// See if this looks like a bot; there is some additional filtering on the
	// backend, but these properties can't be fetched from there.
	var is_bot = function() {
		// Headless browsers are probably a bot.
		var w = window, d = document
		if (w.callPhantom || w._phantom || w.phantom)
			return 150
		if (w.__nightmare)
			return 151
		if (d.__selenium_unwrapped || d.__webdriver_evaluate || d.__driver_evaluate)
			return 152
		if (navigator.webdriver)
			return 153
		return 0
	}

	// Object to urlencoded string, starting with a ?.
	var urlencode = function(obj) {
		var p = []
		for (var k in obj)
			if (obj[k] !== '' && obj[k] !== null && obj[k] !== undefined && obj[k] !== false)
				p.push(enc(k) + '=' + enc(obj[k]))
		return '?' + p.join('&')
	}

	// Show a warning in the console.
	var warn = function(msg) {
		if (console && 'warn' in console)
			console.warn('goatcounter: ' + msg)
	}

	// Get the endpoint to send requests to.
	var get_endpoint = function() {
		var s = document.querySelector('script[data-goatcounter]')
		return (s && s.dataset.goatcounter) ? s.dataset.goatcounter : goatcounter.endpoint
	}

	// Get current path.
	var get_path = function() {
		var loc = location,
			c = document.querySelector('link[rel="canonical"][href]')
		if (c) {  // May be relative or point to different domain.
			var a = document.createElement('a')
			a.href = c.href
			if (a.hostname.replace(/^www\./, '') === location.hostname.replace(/^www\./, ''))
				loc = a
		}
		return (loc.pathname + loc.search) || '/'
	}

	// Run function after DOM is loaded.
	var on_load = function(f) {
		if (document.body === null)
			document.addEventListener('DOMContentLoaded', function() { f() }, false)
		else
			f()
	}

	// Filter some requests that we (probably) don't want to count.
	window.goatcounter.filter = function() {
		if ('visibilityState' in document && document.visibilityState === 'prerender')
			return 'visibilityState'
		if (!goatcounter.allow_frame && location !== parent.location)
			return 'frame'
		if (!goatcounter.allow_local && location.hostname.match(/(localhost$|^127\.|^10\.|^172\.(1[6-9]|2[0-9]|3[0-1])\.|^192\.168\.|^0\.0\.0\.0$)/))
			return 'localhost'
		if (!goatcounter.allow_local && location.protocol === 'file:')
			return 'localfile'
		if (localStorage && localStorage.getItem('skipgc') === 't')
			return 'disabled with #toggle-goatcounter'
		return false
	}

	// Get URL to send to GoatCounter.
	window.goatcounter.url = function(vars) {
		var data = window.goatcounter.get_data(vars || {})
		if (data.p === null)  // null from user callback.
			return
		data.rnd = Math.random().toString(36).substr(2, 5)  // Browsers don't always listen to Cache-Control.

		var endpoint = get_endpoint()
		if (!endpoint)
			return warn('no endpoint found')

		return endpoint + urlencode(data)
	}

	// Count a hit.
	window.goatcounter.count = function(vars) {
		var f = goatcounter.filter()
		if (f)
			return warn('not counting because of: ' + f)
		var url = goatcounter.url(vars)
		if (!url)
			return warn('not counting because path callback returned null')

		if (!navigator.sendBeacon(url)) {
			// This mostly fails due to being blocked by CSP; try again with an
			// image-based fallback.
			var img = document.createElement('img')
			img.src = url
			img.style.position = 'absolute'  // Affect layout less.
			img.style.bottom = '0px'
			img.style.width = '1px'
			img.style.height = '1px'
			img.loading = 'eager'
			img.setAttribute('alt', '')
			img.setAttribute('aria-hidden', 'true')

			var rm = function() { if (img && img.parentNode) img.parentNode.removeChild(img) }
			img.addEventListener('load', rm, false)
			document.body.appendChild(img)
		}
	}

	// Get a query parameter.
	window.goatcounter.get_query = function(name) {
		var s = location.search.substr(1).split('&')
		for (var i = 0; i < s.length; i++)
			if (s[i].toLowerCase().indexOf(name.toLowerCase() + '=') === 0)
				return s[i].substr(name.length + 1)
	}

	// Track click events.
	window.goatcounter.bind_events = function() {
		if (!document.querySelectorAll)  // Just in case someone uses an ancient browser.
			return

		var send = function(elem) {
			return function() {
				goatcounter.count({
					event:    true,
					path:     (elem.dataset.goatcounterClick || elem.name || elem.id || ''),
					title:    (elem.dataset.goatcounterTitle || elem.title || (elem.innerHTML || '').substr(0, 200) || ''),
					referrer: (elem.dataset.goatcounterReferrer || elem.dataset.goatcounterReferral || ''),
				})
			}
		}

		Array.prototype.slice.call(document.querySelectorAll("*[data-goatcounter-click]")).forEach(function(elem) {
			if (elem.dataset.goatcounterBound)
				return
			var f = send(elem)
			elem.addEventListener('click', f, false)
			elem.addEventListener('auxclick', f, false)  // Middle click.
			elem.dataset.goatcounterBound = 'true'
		})
	}

	// Add a "visitor counter" frame or image.
	window.goatcounter.visit_count = function(opt) {
		on_load(function() {
			opt        = opt        || {}
			opt.type   = opt.type   || 'html'
			opt.append = opt.append || 'body'
			opt.path   = opt.path   || get_path()
			opt.attr   = opt.attr   || {width: '200', height: (opt.no_branding ? '60' : '80')}

			opt.attr['src'] = get_endpoint() + 'er/' + enc(opt.path) + '.' + enc(opt.type) + '?'
			if (opt.no_branding) opt.attr['src'] += '&no_branding=1'
			if (opt.style)       opt.attr['src'] += '&style=' + enc(opt.style)
			if (opt.start)       opt.attr['src'] += '&start=' + enc(opt.start)
			if (opt.end)         opt.attr['src'] += '&end='   + enc(opt.end)

			var tag = {png: 'img', svg: 'img', html: 'iframe'}[opt.type]
			if (!tag)
				return warn('visit_count: unknown type: ' + opt.type)

			if (opt.type === 'html') {
				opt.attr['frameborder'] = '0'
				opt.attr['scrolling']   = 'no'
			}

			var d = document.createElement(tag)
			for (var k in opt.attr)
				d.setAttribute(k, opt.attr[k])

			var p = document.querySelector(opt.append)
			if (!p)
				return warn('visit_count: element to append to not found: ' + opt.append)
			p.appendChild(d)
		})
	}

	// Make it easy to skip your own views.
	if (location.hash === '#toggle-goatcounter') {
		if (localStorage.getItem('skipgc') === 't') {
			localStorage.removeItem('skipgc', 't')
			alert('GoatCounter tracking is now ENABLED in this browser.')
		}
		else {
			localStorage.setItem('skipgc', 't')
			alert('GoatCounter tracking is now DISABLED in this browser until ' + location + ' is loaded again.')
		}
	}

	if (!goatcounter.no_onload)
		on_load(function() {
			// 1. Page is visible, count request.
			// 2. Page is not yet visible; wait until it switches to 'visible' and count.
			// See #487
			if (!('visibilityState' in document) || document.visibilityState === 'visible')
				goatcounter.count()
			else {
				var f = function(e) {
					if (document.visibilityState !== 'visible')
						return
					document.removeEventListener('visibilitychange', f)
					goatcounter.count()
				}
				document.addEventListener('visibilitychange', f)
			}

			if (!goatcounter.no_events)
				goatcounter.bind_events()
		})
})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nvim-mini\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© Evgeni Chasnovski, <a href="https://choosealicense.com/licenses/mit/">MIT</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>